# 會議記錄AI優化系統

## 目錄
- [專案概述](#專案概述)
- [功能特點](#功能特點)
- [系統要求](#系統要求)
- [開發環境規格](#開發環境規格)
- [程式流程](#程式流程)
- [優化框架與實施計劃](#優化框架與實施計劃)
  - [1. 評估指標建立](#1-評估指標建立)
  - [2. 提示詞工程優化](#2-提示詞工程優化)
  - [3. 自動化評估系統](#3-自動化評估系統)
  - [4. 人工評估機制](#4-人工評估機制)
  - [5. 持續優化循環](#5-持續優化循環)
- [最新異動](#最新異動)
- [安裝步驟](#安裝步驟)
- [使用方法](#-使用方法)
- [配置](#-配置)
- [評估結果](#-評估結果)
- [貢獻](#-貢獻)
- [授權](#-授權)
- [未來改進](#-未來改進)
- [目錄結構說明](#目錄結構說明)
- [優化策略](#優化策略)
- [使用Docker運行](#使用docker運行)
- [常見問題](#常見問題)

## 專案概述

## 專案概述
這是一個基於AI的會議記錄優化系統，使用開源大語言模型（如Gemma）將原始會議逐字稿轉換為結構化、易讀的正式會議記錄。系統支持多種優化策略，可根據需求調整輸出格式和風格。

## 功能特點

- **多種優化策略**：支持精簡冗詞、結構化摘要、發言者標註等多種優化方式
- **模型管理**：支持多種Ollama模型，可靈活切換不同規模的語言模型
- **自動評估**：提供優化結果與參考標準的相似度評估
- **資源監控**：實時監控系統資源使用情況，確保穩定運行
- **可擴展架構**：模塊化設計，易於添加新的優化策略和評估指標

## 系統要求

- Python 3.8+
- Ollama (運行開源大語言模型)
- 推薦至少16GB內存（運行較大模型時）

## 開發環境規格

### 硬體規格
- **型號**：MacBook Pro (Mac16,1)
- **處理器**：Apple M4 晶片
  - **核心數**：10 核心 (4 個高效能核心 + 6 個節能核心)
- **記憶體**：16 GB 統一記憶體
- **系統韌體版本**：11881.121.1

### 軟體環境
- **作業系統**：macOS 15.5 (24F74)
- **核心版本**：Darwin 24.5.0
- **Python 版本**：3.13.3

## 優化框架與實施計劃

本專案採用五階段優化框架，持續提升會議記錄優化的質量與效率。

### 1. 評估指標建立
- **目標**：建立全面、客觀的評估體系
- **已完成**：
  - 執行時間統計
  - 基本相似度比對
- **待完成**：
  - 引入 BERTScore 語義相似度評估
  - 實現 ROUGE 關鍵詞覆蓋率分析
  - 建立多維度評分權重系統

### 2. 提示詞工程優化
- **目標**：提升提示詞的準確性和有效性
- **計劃**：
  - 優化現有策略提示詞
  - 實現動態範例選擇機制
  - 添加明確的格式規範和分隔符
  - 引入思維鏈（Chain-of-Thought）提示
  - 建立提示詞版本控制系統

### 3. 自動化評估系統
- **目標**：實現高效、準確的自動評估
- **計劃**：
  - 整合多種評估指標（BERTScore, ROUGE等）
  - 實現評估結果可視化
  - 建立評估結果數據庫
  - 開發評估報告生成工具

### 4. 人工評估機制
- **目標**：確保評估結果符合實際需求
- **計劃**：
  - 設計結構化人工評分表
  - 建立抽樣評估流程
  - 實現人工-自動評分比對
  - 建立評估標準文檔

### 5. 持續優化循環
- **目標**：建立自我改進的閉環系統
- **計劃**：
  - 實現自動化測試流程
  - 建立反饋收集機制
  - 定期更新評估標準
  - 持續監控系統表現

## 程式流程

1. **啟動階段**
   - 執行 `run_optimization.sh` 腳本
   - 啟動虛擬環境
   - 啟動 Ollama 服務
   - 顯示模型選擇選單

2. **主要處理流程**
   - 載入會議逐字稿
   - 尋找對應的參考會議記錄
   - 套用各項優化策略
   - 呼叫選定的語言模型進行處理
   - 記錄執行時間
   - 儲存優化結果

3. **策略類別**
   - A_角色定義：專業角色定義、專業術語標準化
   - B_結構優化：結構化摘要、明確標註發言者
   - C_內容優化：精簡冗詞、補充省略資訊
   - D_格式規範：標準格式模板、明確標示決議事項

4. **結果輸出**
   - 生成 Markdown 格式的優化結果
   - 輸出執行時間統計
   - 生成評估報告

## 最新異動

### 2025-05-27
- **新增功能**：添加模型響應時間記錄功能
  - 記錄每個模型調用的響應時間
  - 計算並顯示平均響應時間和總執行時間
  - 輸出每個策略的執行時間統計

- **效能優化**：
  - 優化模型調用過程中的錯誤處理
  - 改進重試機制，提高穩定性

- **問題修復**：
  - 修復 `time` 模組導入問題
  - 修正 `model_timings` 和 `strategy_timings` 變數作用域問題

### 2025-05-20
- 初始版本發布
- 實現基本優化流程
- 支援多種優化策略
- 添加模型管理功能

## 安裝步驟

### 1. 克隆代碼庫
```bash
git clone [https://github.com/colabbrave/exam08.git](https://github.com/colabbrave/exam08.git)
cd exam08_提示詞練習重啟
```

2. **設置虛擬環境**
   ```bash
   # 使用 Python 內建 venv
   python -m venv .venv
   source .venv/bin/activate  # Linux/Mac
   # 或
   .venv\Scripts\activate    # Windows
   
   # 或使用 uv（更快）
   # pip install uv
   # uv venv
   # source .venv/bin/activate
   ```

3. **安裝依賴**
   ```bash
   pip install -r requirements.txt
   ```

## 🛠 使用方法

### 基本用法

```bash
# 使用預設設置運行
./run_optimization.sh

# 使用非互動模式（自動選擇第一個可用模型）
./run_optimization.sh --non-interactive

# 指定要使用的模型
./run_optimization.sh --model gemma:4b

# 查看幫助
./run_optimization.sh --help
```

### 命令選項

| 選項 | 說明 | 預設值 |
|------|------|--------|
| `--interactive` | 啟用互動模式 | 是 |
| `--non-interactive` | 使用非互動模式 | 否 |
| `--model <名稱>` | 指定要使用的模型 | 無 |

## 🔧 配置

### 模型選擇

工具支援多種 AI 模型，包括：
- Gemma 系列
- LLaMA 系列
- 其他 Ollama 支援的模型

### 日誌

日誌文件保存在 `logs/` 目錄下，格式為：
```
optimization_YYYYMMDD_HHMMSS.log
```

## 🤝 貢獻

歡迎提交 Pull Request 或報告問題。請確保：

1. 遵循現有代碼風格
2. 添加適當的測試
3. 更新相關文檔

## 📄 授權

本專案採用 [MIT 授權](LICENSE)。

---

💡 提示：使用前請確保已下載所需的 AI 模型（使用 `ollama pull <模型名稱>`）

📧 如有問題或建議，請提交 [Issue](https://github.com/colabbrave/exam08/issues) 或聯繫維護者。

## 📊 評估結果

### 測試環境
- 測試模型：jcai/llama3-taide-lx-8b-chat-alpha1
- 測試數據：第671次、第672次市政會議逐字稿
- 評估指標：與參考會議記錄的相似度（0-1，越高越好）

### 各策略表現（按平均相似度排序）

| 策略 | 第671次會議 | 第672次會議 | 平均分 |
|------|------------|------------|--------|
| 標準格式模板 | 0.0807 | 0.0757 | 0.0782 |
| 明確標註發言者 | 0.0687 | 0.0823 | 0.0755 |
| 結構化摘要 | 0.0739 | 0.0770 | 0.0755 |
| 精簡冗詞 | 0.0724 | 0.0534 | 0.0629 |
| 專業角色定義 | 0.0548 | 0.0695 | 0.0622 |
| 專業術語標準化 | 0.0571 | 0.0555 | 0.0563 |
| 補充省略資訊 | 0.0510 | 0.0581 | 0.0546 |
| 明確標示決議事項 | 0.0552 | 0.0337 | 0.0445 |

### 主要發現

1. **最佳表現策略**
   - 標準格式模板（平均分：0.0782）
   - 明確標註發言者（平均分：0.0755）
   - 結構化摘要（平均分：0.0755）

2. **穩定性分析**
   - 最穩定：結構化摘要（變異係數：2.1%）
   - 最不穩定：明確標示決議事項（變異係數：24.2%）

3. **模型表現**
   - 整體表現優於其他測試模型（如gemma3:4b）
   - 在處理結構化輸出任務上表現最佳

## 🚀 未來改進

### 短期目標
- [x] 實現多模型評估框架
- [x] 添加自動化評估腳本
- [x] 生成詳細評估報告
- [ ] 優化提示詞模板
- [ ] 實現更精細的評估指標

### 中期目標
- [ ] 添加圖形用戶界面
- [ ] 支持並行處理多個文件
- [ ] 完善API文檔
- [ ] 添加單元測試和集成測試

### 長期目標
- [ ] 實現自適應優化策略
- [ ] 支持自定義評估指標
- [ ] 開發模型微調工具

## 目錄結構說明

- `/config`: 配置文件和優化策略定義
- `/data`: 原始逐字稿和參考會議記錄
  - `/transcript`: 原始會議逐字稿
  - `/reference`: 標準會議記錄（參考答案）
- `/prompts`: 提示詞模板和組件
- `/results`: 優化結果和評估報告
- `/scripts`: 核心處理腳本

## 優化策略

系統支持以下優化策略（定義於`/config/improvement_strategies.json`）：

- 精簡冗詞
- 結構化摘要
- 明確標註發言者
- 補充省略資訊
- 轉換為正式書面語
- 強化邏輯連貫性
- 統一專有名詞
- 刪除無關閒聊
- 明確標示決議事項
- 補充會議背景

## 使用Docker運行

1. 構建Docker鏡像
   ```bash
   docker build -t meeting-minutes-optimizer .
   ```

2. 運行容器
   ```bash
   docker run -it --rm -v $(pwd):/app meeting-minutes-optimizer
   ```

## 常見問題

### 1. 優化結果不理想
- 嘗試使用更大的模型（如gemma:7b）
- 調整提示詞模板
- 檢查原始逐字稿的格式是否正確

### 2. 內存不足
- 使用較小的模型（如gemma:2b）
- 關閉其他內存密集型應用
- 增加系統交換空間

## 貢獻指南

我們歡迎貢獻！請遵循以下步驟：

1. Fork 本專案
2. 創建特性分支 (`git checkout -b feature/amazing-feature`)
3. 提交更改 (`git commit -m 'Add some amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 開啟 Pull Request

## 授權

本專案採用 [MIT 授權](LICENSE)。

## 未來改進

- [ ] 實現更精細的評估指標
- [ ] 添加圖形用戶界面
- [ ] 支持並行處理多個文件
- [ ] 完善API文檔
- [ ] 添加單元測試和集成測試

---
