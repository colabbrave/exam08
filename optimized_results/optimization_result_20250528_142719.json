{
  "timestamp": "20250528_142719",
  "model": "gemma3:4b",
  "iterations": 6,
  "duration_seconds": 228.34520483016968,
  "best_score": 0.4800000000000001,
  "best_template": "好的，以下是根據您的要求改進後的會議記錄模板：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 出席狀態 (例如：出席、缺席、遲到) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結) |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險}\n\n| 潛在風險 | 影響程度 (高/中/低) | 應對措施 | 負責人 |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**提示:**\n\n*   在會議結束後立即記錄，以確保資訊的準確性。\n*   使用清晰、簡潔的語言，避免使用含糊不清的術語。 盡量使用專業術語。\n*   在記錄過程中，積極參與討論，並記錄關鍵資訊。\n*   在會議結束後，儘快將記錄發送給與會人員，並徵求他們的意見。 鼓勵與會者在會議記錄中補充或修改信息。\n\n**重要說明:**  此模板旨在提供一個結構化的框架。  根據您的具體需求和會議類型，可以適當調整和修改。  請務必保持記錄的準確性和完整性。\n",
  "stability_threshold": 0.7,
  "results": {
    "stability_score": 0.8000000000000002,
    "quality_score": 0.0,
    "overall_score": 0.4800000000000001,
    "metrics": {
      "stability_score": 0.8000000000000002,
      "quality_score": 0.0,
      "overall_score": 0.4800000000000001,
      "stability_metrics": {
        "format_consistency": 1.0000000000000002,
        "length_stability": 1.0,
        "key_element_coverage": 0.3333333333333333,
        "semantic_stability": 1.0000000000000002,
        "overall_stability": 0.8000000000000002
      },
      "quality_metrics": {
        "categories": {
          "semantic_similarity": {
            "name": "semantic_similarity",
            "score": 0.0,
            "metrics": {
              "bertscore_f1": {
                "score": 0.0,
                "weight": 1.0,
                "details": {
                  "error": "unhashable type: 'list'"
                }
              }
            }
          },
          "content_coverage": {
            "name": "content_coverage",
            "score": 0.0,
            "metrics": {
              "rouge1": {
                "score": 0.0,
                "weight": 0.3,
                "details": {
                  "error": "'list' object has no attribute 'lower'"
                }
              },
              "rouge2": {
                "score": 0.0,
                "weight": 0.4,
                "details": {
                  "error": "'list' object has no attribute 'lower'"
                }
              },
              "rougeL": {
                "score": 0.0,
                "weight": 0.3,
                "details": {
                  "error": "'list' object has no attribute 'lower'"
                }
              }
            }
          },
          "structure_quality": {
            "name": "structure_quality",
            "score": 0.0,
            "metrics": {
              "section_heading_quality": {
                "score": 0.0,
                "weight": 0.4,
                "details": {
                  "error": "'list' object has no attribute 'split'"
                }
              },
              "paragraph_structure": {
                "score": 0.0,
                "weight": 0.3,
                "details": {
                  "error": "'list' object has no attribute 'split'"
                }
              },
              "list_usage": {
                "score": 0.0,
                "weight": 0.3,
                "details": {
                  "error": "'list' object has no attribute 'split'"
                }
              }
            }
          }
        },
        "overall_score": 0.0
      },
      "generated_samples": [
        "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 出席狀態 (例如：出席、缺席、遲到) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結) |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險}\n\n| 潛在風險 | 影響程度 (高/中/低) | 應對措施 | 負責人 |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**提示:**\n\n*   在會議結束後立即記錄，以確保資訊的準確性。\n*   使用清晰、簡潔的語言，避免使用含糊不清的術語。 盡量使用專業術語。\n*   在記錄過程中，積極參與討論，並記錄關鍵資訊。\n*   在會議結束後，儘快將記錄發送給與會人員，並徵求他們的意見。 鼓勵與會者在會議記錄中補充或修改信息。\n\n**重要說明:**  此模板旨在提供一個結構化的框架。  根據您的具體需求和會議類型，可以適當調整和修改。  請務必保持記錄的準確性和完整性。\n\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0",
        "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 出席狀態 (例如：出席、缺席、遲到) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結) |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險}\n\n| 潛在風險 | 影響程度 (高/中/低) | 應對措施 | 負責人 |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**提示:**\n\n*   在會議結束後立即記錄，以確保資訊的準確性。\n*   使用清晰、簡潔的語言，避免使用含糊不清的術語。 盡量使用專業術語。\n*   在記錄過程中，積極參與討論，並記錄關鍵資訊。\n*   在會議結束後，儘快將記錄發送給與會人員，並徵求他們的意見。 鼓勵與會者在會議記錄中補充或修改信息。\n\n**重要說明:**  此模板旨在提供一個結構化的框架。  根據您的具體需求和會議類型，可以適當調整和修改。  請務必保持記錄的準確性和完整性。\n\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0",
        "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 出席狀態 (例如：出席、缺席、遲到) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結) |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險}\n\n| 潛在風險 | 影響程度 (高/中/低) | 應對措施 | 負責人 |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**提示:**\n\n*   在會議結束後立即記錄，以確保資訊的準確性。\n*   使用清晰、簡潔的語言，避免使用含糊不清的術語。 盡量使用專業術語。\n*   在記錄過程中，積極參與討論，並記錄關鍵資訊。\n*   在會議結束後，儘快將記錄發送給與會人員，並徵求他們的意見。 鼓勵與會者在會議記錄中補充或修改信息。\n\n**重要說明:**  此模板旨在提供一個結構化的框架。  根據您的具體需求和會議類型，可以適當調整和修改。  請務必保持記錄的準確性和完整性。\n\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0"
      ]
    }
  },
  "optimization_history": [
    {
      "iteration": 1,
      "stability_score": 0.5457369926467174,
      "quality_score": 0.0,
      "overall_score": 0.3274421955880304,
      "metrics": {
        "stability_score": 0.5457369926467174,
        "quality_score": 0.0,
        "overall_score": 0.3274421955880304,
        "stability_metrics": {
          "format_consistency": 0.9533150574183559,
          "length_stability": 0.5730089997174476,
          "key_element_coverage": 0.16666666666666666,
          "semantic_stability": 0.47570337738860563,
          "overall_stability": 0.5457369926467174
        },
        "quality_metrics": {
          "categories": {
            "semantic_similarity": {
              "name": "semantic_similarity",
              "score": 0.0,
              "metrics": {
                "bertscore_f1": {
                  "score": 0.0,
                  "weight": 1.0,
                  "details": {
                    "error": "unhashable type: 'list'"
                  }
                }
              }
            },
            "content_coverage": {
              "name": "content_coverage",
              "score": 0.0,
              "metrics": {
                "rouge1": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rouge2": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rougeL": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                }
              }
            },
            "structure_quality": {
              "name": "structure_quality",
              "score": 0.0,
              "metrics": {
                "section_heading_quality": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "paragraph_structure": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "list_usage": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                }
              }
            }
          },
          "overall_score": 0.0
        },
        "generated_samples": [
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求，對會議記錄模板進行結構增強後的版本，旨在提供清晰、邏輯流暢且易於使用的結構：\n\n---\n\n**[會議記錄]**\n\n**1. 會議資訊**\n\n*   **會議主題:** {topic}\n*   **會議時間:** {time}\n*   **會議地點:** {location} (如果適用)\n*   **會議類型:** {meeting_type} (例如：定期例會、專案會議、決策會議)\n*   **與會人員:** {participants} (包含姓名和職位)\n*   **主持人:** {chairperson}\n*   **記錄員:** {recorder}\n\n**2. 會議內容**\n\n*   **2.1 簡要回顧 (Introduction)** (5-10分鐘)\n    *   主持人簡要介紹會議目的和討論範圍。\n    *   確認與會人員出席情況。\n*   **2.2 討論要點 (Key Discussion Points)**\n    *   **2.2.1 議題一: {topic_1}**\n        *   **背景資訊:** {background_information}\n        *   **討論內容:**\n            *   **選項 A:** {option_a_description}\n            *   **選項 B:** {option_b_description}\n            *   **選項 C:** {option_c_description}\n            *   **其他相關討論:** {other_discussion}\n        *   **相關數據/證據:** {relevant_data} (如果適用)\n    *   **2.2.2 議題二: {topic_2}** (重複上述結構)\n    *   **2.2.3 議題三: {topic_n}** (依序重複)\n*   **2.3 決議事項 (Decisions Made)**\n    *   **決議 1:** {decision_1}\n    *   **決議 2:** {decision_2}\n    *   **決議 3:** {decision_n}\n\n**3. 行動項目 (Action Items)**\n\n| 行動項目編號 | 負責人 | 截止日期 | 相關事項/說明 |\n|---|---|---|---|\n| 1 | {action_item_1} | {due_date_1} | {details_1} |\n| 2 | {action_item_2} | {due_date_2} | {details_2} |\n| 3 | {action_item_n} | {due_date_n} | {details_n} |\n\n**4. 備註 (Optional)**\n\n*   **未解決問題:** {unresolved_issues}\n*   **下次會議預定事項:** {next_meeting_agenda}\n*   **其他相關資訊:** {additional_notes}\n\n---\n\n**說明:**\n\n*   **層次結構:**  使用標題、副標題和表格，清晰地劃分了會議內容的不同部分。\n*   **邏輯流:**  按照會議的自然流程，先提供會議資訊，再詳細記錄討論內容，最後列出行動項目。\n*   **格式一致性:**  使用項目符號、表格和明確的標題，確保格式一致性。\n*   **可填寫性:**  模板中包含許多佔位符，方便您直接填寫會議資訊。\n*   **可擴展性:**  您可以根據實際情況，增加或刪除議題，並調整表格的欄位。\n\n希望這個增強後的模板能幫助您更有效地記錄會議。  如果您有任何其他要求或需要調整，請隨時告訴我。\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求，對會議記錄模板進行結構增強後的版本，旨在提供清晰、邏輯流暢且易於使用的結構：\n\n---\n\n**[會議記錄]**\n\n**1. 會議資訊**\n\n*   **會議主題:** {topic}\n*   **會議時間:** {time}\n*   **會議地點:** {location} (如果適用)\n*   **會議類型:** {meeting_type} (例如：定期例會、專案會議、決策會議)\n*   **與會人員:** {participants} (包含姓名和職位)\n*   **主持人:** {chairperson}\n*   **記錄員:** {recorder}\n\n**2. 會議內容**\n\n*   **2.1 簡要回顧 (Introduction)** (5-10分鐘)\n    *   主持人簡要介紹會議目的和討論範圍。\n    *   確認與會人員出席情況。\n*   **2.2 討論要點 (Key Discussion Points)**\n    *   **2.2.1 議題一: {topic_1}**\n        *   **背景資訊:** {background_information}\n        *   **討論內容:**\n            *   **選項 A:** {option_a_description}\n            *   **選項 B:** {option_b_description}\n            *   **選項 C:** {option_c_description}\n            *   **其他相關討論:** {other_discussion}\n        *   **相關數據/證據:** {relevant_data} (如果適用)\n    *   **2.2.2 議題二: {topic_2}** (重複上述結構)\n    *   **2.2.3 議題三: {topic_n}** (依序重複)\n*   **2.3 決議事項 (Decisions Made)**\n    *   **決議 1:** {decision_1}\n    *   **決議 2:** {decision_2}\n    *   **決議 3:** {decision_n}\n\n**3. 行動項目 (Action Items)**\n\n| 行動項目編號 | 負責人 | 截止日期 | 相關事項/說明 |\n|---|---|---|---|\n| 1 | {action_item_1} | {due_date_1} | {details_1} |\n| 2 | {action_item_2} | {due_date_2} | {details_2} |\n| 3 | {action_item_n} | {due_date_n} | {details_n} |\n\n**4. 備註 (Optional)**\n\n*   **未解決問題:** {unresolved_issues}\n*   **下次會議預定事項:** {next_meeting_agenda}\n*   **其他相關資訊:** {additional_notes}\n\n---\n\n**說明:**\n\n*   **層次結構:**  使用標題、副標題和表格，清晰地劃分了會議內容的不同部分。\n*   **邏輯流:**  按照會議的自然流程，先提供會議資訊，再詳細記錄討論內容，最後列出行動項目。\n*   **格式一致性:**  使用項目符號、表格和明確的標題，確保格式一致性。\n*   **可填寫性:**  模板中包含許多佔位符，方便您直接填寫會議資訊。\n*   **可擴展性:**  您可以根據實際情況，增加或刪除議題，並調整表格的欄位。\n\n希望這個增強後的模板能幫助您更有效地記錄會議。  如果您有任何其他要求或需要調整，請隨時告訴我。\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求，對會議記錄模板進行結構增強後的版本，旨在提供清晰、邏輯流暢且易於使用的結構：\n\n---\n\n**[會議記錄]**\n\n**1. 會議資訊**\n\n*   **會議主題:** {topic}\n*   **會議時間:** {time}\n*   **會議地點:** {location} (如果適用)\n*   **會議類型:** {meeting_type} (例如：定期例會、專案會議、決策會議)\n*   **與會人員:** {participants} (包含姓名和職位)\n*   **主持人:** {chairperson}\n*   **記錄員:** {recorder}\n\n**2. 會議內容**\n\n*   **2.1 簡要回顧 (Introduction)** (5-10分鐘)\n    *   主持人簡要介紹會議目的和討論範圍。\n    *   確認與會人員出席情況。\n*   **2.2 討論要點 (Key Discussion Points)**\n    *   **2.2.1 議題一: {topic_1}**\n        *   **背景資訊:** {background_information}\n        *   **討論內容:**\n            *   **選項 A:** {option_a_description}\n            *   **選項 B:** {option_b_description}\n            *   **選項 C:** {option_c_description}\n            *   **其他相關討論:** {other_discussion}\n        *   **相關數據/證據:** {relevant_data} (如果適用)\n    *   **2.2.2 議題二: {topic_2}** (重複上述結構)\n    *   **2.2.3 議題三: {topic_n}** (依序重複)\n*   **2.3 決議事項 (Decisions Made)**\n    *   **決議 1:** {decision_1}\n    *   **決議 2:** {decision_2}\n    *   **決議 3:** {decision_n}\n\n**3. 行動項目 (Action Items)**\n\n| 行動項目編號 | 負責人 | 截止日期 | 相關事項/說明 |\n|---|---|---|---|\n| 1 | {action_item_1} | {due_date_1} | {details_1} |\n| 2 | {action_item_2} | {due_date_2} | {details_2} |\n| 3 | {action_item_n} | {due_date_n} | {details_n} |\n\n**4. 備註 (Optional)**\n\n*   **未解決問題:** {unresolved_issues}\n*   **下次會議預定事項:** {next_meeting_agenda}\n*   **其他相關資訊:** {additional_notes}\n\n---\n\n**說明:**\n\n*   **層次結構:**  使用標題、副標題和表格，清晰地劃分了會議內容的不同部分。\n*   **邏輯流:**  按照會議的自然流程，先提供會議資訊，再詳細記錄討論內容，最後列出行動項目。\n*   **格式一致性:**  使用項目符號、表格和明確的標題，確保格式一致性。\n*   **可填寫性:**  模板中包含許多佔位符，方便您直接填寫會議資訊。\n*   **可擴展性:**  您可以根據實際情況，增加或刪除議題，並調整表格的欄位。\n\n希望這個增強後的模板能幫助您更有效地記錄會議。  如果您有任何其他要求或需要調整，請隨時告訴我。\n\n參考:\n# 會議記錄優化與評估系統\n\n## 專案概述\n\n本專案旨在利用大型語言模型（LLM）來自動優化會議記錄，提高其結構化程度、完整性和可讀性。系統支援多種優化策略，並提供全面的評估框架來衡量優化效果。\n\n## 主要功能\n\n- **多策略優化**：支援多種會議記錄優化策略\n- **多模型支援**：可與多種開源和商業語言模型整合\n- **自動化評估**：提供多種評估指標來衡量優化效果\n- **可擴展架構**：易於添加新的優化策略和評估指標\n\n## 快速開始\n\n### 前置需求\n- Python 3.8+\n- Ollama 服務 (用於運行本地模型)\n\n### 安裝步驟\n\n```bash\n# 1. 克隆存儲庫\ngit clone https://github.com/colabbrave/exam08.git\ncd exam08\n\n# 2. 創建並啟動虛擬環境\npython -m venv venv\nsource venv/bin/activate  # Linux/Mac\n# 或\n# .\\venv\\Scripts\\activate  # Windows\n\n# 3. 安裝依賴\npip install -r requirements.txt\n\n# 4. 下載並啟動 Ollama 模型\nollama pull gemma3:4b  # 或其他支援的模型\n```\n\n### 基本用法\n\n```bash\n# 優化會議記錄\n./run_optimization.sh\n\n# 或指定模型\n./run_optimization.sh --model gemma3:4b\n\n# 評估優化結果\npython scripts/evaluate.py --model gemma3_4b\n```\n\n## 專案結構\n\n```\n.\n├── config/                  # 配置文件\n├── data/                    # 數據目錄\n│   ├── reference/           # 參考會議記錄\n│   └── transcript/          # 原始逐字稿\n├── docu/                    # 文檔\n├── logs/                    # 運行日誌\n├── models/                  # 模型文件\n├── prompts/                 # 提示詞模板\n│   ├── base/                # 基礎提示詞\n│   ├── components/          # 提示詞組件\n│   ├── optimized/           # 優化後的提示詞\n│   └── preloaded/           # 預加載的提示詞\n├── results/                 # 結果輸出\n│   ├── evaluation_reports/  # 評估報告\n│   └── optimized/           # 優化後的會議記錄\n└── scripts/                 # 腳本文件\n    ├── evaluate.py          # 評估腳本\n    ├── optimize.py          # 優化腳本\n    ├── model_manager.py     # 模型管理\n    ├── ollama_manager.py    # Ollama 集成\n    └── select_model.py      # 模型選擇\n```\n\n## 評估結果\n\n### 多指標評估系統\n\n我們實現了全面的多指標評估系統，包含以下主要指標：\n\n#### 1. 語義相似度 (權重 50%)\n- **BERTScore F1**：衡量優化前後文本的語義相似度\n- **平均分數**：0.85\n\n#### 2. 內容覆蓋度 (權重 30%)\n- **ROUGE-1**：unigram 層面的覆蓋度\n- **ROUGE-2**：bigram 層面的覆蓋度\n- **ROUGE-L**：最長公共子序列\n- **平均分數**：0.78\n\n#### 3. 結構化程度 (權重 20%)\n- 章節標題質量\n- 段落結構質量\n- 列表使用適當性\n- **平均分數**：0.82\n\n### 模型表現比較\n\n| 模型 | 綜合得分 | 響應時間 | BERTScore | ROUGE-L |\n|------|---------|---------|-----------|---------|\n| gemma3:4b | 0.85 | 45.2s | 0.88 | 0.75 |\n| llama3-8b | 0.82 | 68.7s | 0.86 | 0.73 |\n| mistral-7b | 0.80 | 52.1s | 0.84 | 0.72 |\n\n### 最佳實踐策略排名\n\n1. **補充省略資訊** (0.92)\n   - 提升內容完整性\n   - 自動補全會議中的隱含資訊\n\n2. **明確標註發言者** (0.89)\n   - 提高可讀性\n   - 便於追蹤討論脈絡\n\n3. **結構化摘要** (0.88)\n   - 提升文件結構化程度\n   - 便於快速瀏覽重點\n\n4. **專業術語標準化** (0.86)\n   - 統一專業術語使用\n   - 提高專業性\n\n5. **標準格式模板** (0.85)\n   - 確保格式一致性\n   - 符合企業規範\n\n> **注意**：詳細評估報告請參考 [評估報告目錄](results/evaluation_reports/)\n\n## 貢獻指南\n\n我們歡迎任何形式的貢獻！以下是參與項目的步驟：\n\n1. Fork 本項目\n2. 創建特性分支 (`git checkout -b feature/amazing-feature`)\n3. 提交更改 (`git commit -m 'Add some amazing feature'`)\n4. 推送到分支 (`git push origin feature/amazing-feature`)\n5. 開啟 Pull Request\n\n### 代碼風格\n- 使用 [Black](https://github.com/psf/black) 進行代碼格式化\n- 使用 [Google 風格的 Python 文檔字符串](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings)\n\n### 提交信息規範\n請遵循 [Conventional Commits](https://www.conventionalcommits.org/) 規範：\n- feat: 新功能\n- fix: 修復 bug\n- docs: 文檔更新\n- style: 代碼格式\n- refactor: 代碼重構\n- test: 測試相關\n- chore: 構建過程或輔助工具的變動\n\n## 專案進度\n\n### 完成情況\n\n1. **基本架構建立** ✅ 已完成\n   - 專案目錄結構\n   - 基礎優化流程\n   - 多模型支援\n\n2. **評估系統實現** ✅ 已完成\n   - ✅ 基本評估框架\n   - ✅ BERTScore 實現\n   - ✅ ROUGE 實現\n   - ✅ 多指標整合\n   - ✅ 評估報告生成\n   - ✅ 評估報告優化 (改為結構化數據格式)\n\n### 當前階段\n\n3. **提示工程優化** 🚀 進行中\n   - 大模型輔助提示詞優化\n   - 非監督學習優化循環\n   - 自動化評估與反饋\n\n### 後續計劃\n\n4. **效能優化** ⏳ 未開始\n   - 並行處理優化\n   - 快取機制實現\n   - 資源使用監控\n\n5. **系統整合** ⏳ 未開始\n   - API 服務封裝\n   - 自動化部署流程\n   - 監控告警系統\n\n## 系統需求與優化\n\n### 硬體配置\n\n- **裝置**：MacBook Pro (M4 晶片)\n- **CPU**：10 核心 (4 個效能核心 + 6 個節能核心)\n- **記憶體**：16GB 統一記憶體\n- **GPU**：Apple M4 整合式顯示晶片\n\n### 模型配置\n\n- **基礎模型**：`cwchang/llama3-taide-lx-8b-chat-alpha1:latest`\n  - 使用 4-bit 量化載入\n  - 主要用於會議記錄生成\n\n- **優化模型**：`google/gemma-3-12b`\n  - 使用 4-bit 量化載入\n  - 用於提示詞優化和改進\n\n## 提示工程優化架構\n\n### 核心組件\n\n1. **會議上下文感知模組**\n   - 自動識別會議類型和特徵\n   - 分析參與者角色和互動模式\n   - 提取關鍵決策點和行動項目\n\n2. **分層提示詞引擎**\n   - 感知層：理解會議本質特徵\n   - 策略層：選擇最優記錄策略\n   - 執行層：生成結構化會議記錄\n\n3. **動態策略管理器**\n   - 多種會議類型的專用策略\n   - 上下文感知的模板選擇\n   - 實時策略調整機制\n\n### 技術實現\n\n```python\n# 會議上下文分析示例\nclass MeetingAnalyzer:\n    def analyze(self, meeting_data: dict) -> MeetingContext:\n        context = MeetingContext()\n        context.meeting_type = self._classify_meeting_type(meeting_data)\n        context.participants = self._extract_participants(meeting_data)\n        context.decision_density = self._calculate_decision_density(meeting_data)\n        return context\n```\n\n### 實施路線圖\n\n#### 階段一：基礎架構重構 (2週)\n- [ ] 實現會議上下文感知模組\n- [ ] 開發分層提示詞引擎基礎框架\n- [ ] 創建3種基礎會議類型的適配器\n\n#### 階段二：動態策略實現 (3週)\n- [ ] 實現策略管理器\n- [ ] 開發模板組件系統\n- [ ] 整合上下文感知評估\n\n#### 階段三：自適應優化 (3週)\n- [ ] 實現強化學習優化器\n- [ ] 設置在線學習循環\n- [ ] 集成知識圖譜\n\n### 預期效益\n\n- **更智能的會議理解**：超越表面指標，理解會議本質\n- **動態適配能力**：根據會議類型自動調整記錄策略\n- **持續優化**：通過在線學習不斷改進表現\n- **更好的可解釋性**：清晰的決策過程和優化路徑\n\n### 技術棧\n\n- **核心框架**：Python 3.9+\n- **機器學習**：PyTorch, Transformers, bitsandbytes (4-bit 量化)\n- **NLP工具**：sentence-transformers, NLTK\n- **記憶體優化**：accelerate, vLLM (可選)\n- **監控工具**：psutil, GPUtil\n\n### 記憶體優化策略\n\n1. **模型量化**\n   - 使用 4-bit 量化技術\n   - 動態量化權重矩陣\n   - 啟用 Flash Attention 2 (如支援)\n\n2. **批次處理**\n   - 小批次處理輸入數據\n   - 實現記憶體監控\n   - 動態調整批次大小\n\n3. **快取機制**\n   - 使用 LRU 快取優化結果\n   - 實現提示詞模板快取\n   - 特徵向量快取\n\n4. **資源監控**\n   - 即時監控記憶體使用\n   - 動態降級機制\n   - 自動清理未使用的資源\n\n### 開發原則\n\n1. **資源效率**：優先考慮記憶體和計算效率\n2. **漸進式增強**：先實現核心功能，再逐步優化\n3. **可觀察性**：完善的監控和日誌記錄\n4. **優雅降級**：在資源受限時自動調整功能\n\n### 效能基準\n\n| 任務 | 預期記憶體使用 | 預期處理時間 |\n|------|--------------|------------|\n| 模型載入 | ~8GB | 30-60秒 |\n| 提示詞優化 | ~12GB | 5-15秒/提示 |\n| 批次處理 (n=5) | ~14GB | 20-40秒 |\n\n> **注意**：實際數值可能因系統負載和具體輸入而異\n\n### 已知限制\n\n1. **記憶體限制**：\n   - 同時載入多個大型模型可能導致記憶體不足\n   - 建議一次只載入一個模型進行推理\n\n2. **處理時間**：\n   - 複雜提示詞可能需要更長處理時間\n   - 批次處理時延遲會增加\n\n3. **建議的最佳實踐**：\n   - 實現請求佇列系統\n   - 設定處理超時機制\n   - 定期重啟長時間運行的程序以釋放記憶體\n\n## 最近更新\n\n### 2025-05-28 (最新)\n- 重構提示工程優化架構\n- 實現分層提示詞引擎\n- 新增會議上下文感知模組\n- 設計動態策略管理系統\n- 更新實施路線圖\n\n### 2025-05-27\n- 更新 README 文件，改進文檔結構和內容完整性\n- 修復評估階段文件路徑比對問題\n- 優化模型名稱處理邏輯，支援不同格式的模型名稱\n- 改進評估腳本，可選擇性評估特定模型的結果\n- 更新 `run_optimization.sh` 腳本，確保正確傳遞模型參數\n- 改進錯誤處理和日誌記錄\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-27\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 改進模型名稱處理邏輯\n- 優化錯誤處理和重試機制\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-26\n- 實現模型響應時間追蹤\n- 優化模型調用過程中的錯誤處理\n- 改進重試機制，提高穩定性\n\n### 2025-05-25\n- 修復 `time` 模組導入問題\n- 修正 `model_timings` 和 `strategy_timings` 變數作用域問題\n- 更新評估結果和改進策略\n\n## 授權\n\n本項目採用 [MIT 許可證](LICENSE) 授權。"
        ]
      },
      "timestamp": "2025-05-28T14:24:05.183578"
    },
    {
      "iteration": 2,
      "stability_score": 0.635826451188609,
      "quality_score": 0.0,
      "overall_score": 0.38149587071316543,
      "metrics": {
        "stability_score": 0.635826451188609,
        "quality_score": 0.0,
        "overall_score": 0.38149587071316543,
        "stability_metrics": {
          "format_consistency": 0.9728556746744207,
          "length_stability": 0.6625848438924845,
          "key_element_coverage": 0.3333333333333333,
          "semantic_stability": 0.5572639000389298,
          "overall_stability": 0.635826451188609
        },
        "quality_metrics": {
          "categories": {
            "semantic_similarity": {
              "name": "semantic_similarity",
              "score": 0.0,
              "metrics": {
                "bertscore_f1": {
                  "score": 0.0,
                  "weight": 1.0,
                  "details": {
                    "error": "unhashable type: 'list'"
                  }
                }
              }
            },
            "content_coverage": {
              "name": "content_coverage",
              "score": 0.0,
              "metrics": {
                "rouge1": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rouge2": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rougeL": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                }
              }
            },
            "structure_quality": {
              "name": "structure_quality",
              "score": 0.0,
              "metrics": {
                "section_heading_quality": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "paragraph_structure": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "list_usage": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                }
              }
            }
          },
          "overall_score": 0.0
        },
        "generated_samples": [
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是改進後的會議記錄模板，旨在提高準確性、完整性、清晰度和專業性：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理)\n\n**日期:** {日期}\n\n**時間:** {會議時間} (包含開始和結束時間)\n\n**地點:** {會議地點} (如果適用)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 備註 (例如：出席狀態) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 備註 (例如：關鍵數據、爭論焦點) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (例如：未開始、進行中、已完成) | 相關文件/連結 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施}\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**改進說明:**\n\n*   **更具體的標題:** 鼓勵使用更具體、描述性的會議標題，方便查找和分類。\n*   **會議編號:** 增加會議編號，方便追蹤和管理。\n*   **與會人員表格:**  提供一個表格，更清晰地記錄與會人員的資訊，並能記錄其出席狀態。\n*   **會議目的:** 明确會議的目的，方便後續回顾和评估。\n*   **會議摘要:**  提供一個摘要，方便快速了解會議重點。\n*   **討論要點表格:**  將討論要點整理成表格，更清晰地記錄討論內容、參與者和關鍵資訊。\n*   **行動項目表格:**  將行動項目整理成表格，包含負責人、行動項目、截止日期和狀態，方便追蹤和管理。\n*   **風險評估 (可選):**  增加風險評估部分，幫助識別和管理會議中可能出現的風險。\n*   **簽署:**  增加簽署欄位，確保記錄的有效性。\n\n**提示:**\n\n*   在會議結束後立即記錄，以確保資訊的準確性。\n*   使用清晰、簡潔的語言，避免使用含糊不清的術語。\n*   在記錄過程中，積極參與討論，並記錄關鍵資訊。\n*   在會議結束後，儘快將記錄發送給與會人員，並徵求他們的意見。\n\n希望這個改進後的模板能幫助您更好地記錄會議，並提高會議效率。  如果您有任何其他要求或需要調整的地方，請隨時提出。\n\n參考:\n# 會議記錄優化與評估系統\n\n## 專案概述\n\n本專案旨在利用大型語言模型（LLM）來自動優化會議記錄，提高其結構化程度、完整性和可讀性。系統支援多種優化策略，並提供全面的評估框架來衡量優化效果。\n\n## 主要功能\n\n- **多策略優化**：支援多種會議記錄優化策略\n- **多模型支援**：可與多種開源和商業語言模型整合\n- **自動化評估**：提供多種評估指標來衡量優化效果\n- **可擴展架構**：易於添加新的優化策略和評估指標\n\n## 快速開始\n\n### 前置需求\n- Python 3.8+\n- Ollama 服務 (用於運行本地模型)\n\n### 安裝步驟\n\n```bash\n# 1. 克隆存儲庫\ngit clone https://github.com/colabbrave/exam08.git\ncd exam08\n\n# 2. 創建並啟動虛擬環境\npython -m venv venv\nsource venv/bin/activate  # Linux/Mac\n# 或\n# .\\venv\\Scripts\\activate  # Windows\n\n# 3. 安裝依賴\npip install -r requirements.txt\n\n# 4. 下載並啟動 Ollama 模型\nollama pull gemma3:4b  # 或其他支援的模型\n```\n\n### 基本用法\n\n```bash\n# 優化會議記錄\n./run_optimization.sh\n\n# 或指定模型\n./run_optimization.sh --model gemma3:4b\n\n# 評估優化結果\npython scripts/evaluate.py --model gemma3_4b\n```\n\n## 專案結構\n\n```\n.\n├── config/                  # 配置文件\n├── data/                    # 數據目錄\n│   ├── reference/           # 參考會議記錄\n│   └── transcript/          # 原始逐字稿\n├── docu/                    # 文檔\n├── logs/                    # 運行日誌\n├── models/                  # 模型文件\n├── prompts/                 # 提示詞模板\n│   ├── base/                # 基礎提示詞\n│   ├── components/          # 提示詞組件\n│   ├── optimized/           # 優化後的提示詞\n│   └── preloaded/           # 預加載的提示詞\n├── results/                 # 結果輸出\n│   ├── evaluation_reports/  # 評估報告\n│   └── optimized/           # 優化後的會議記錄\n└── scripts/                 # 腳本文件\n    ├── evaluate.py          # 評估腳本\n    ├── optimize.py          # 優化腳本\n    ├── model_manager.py     # 模型管理\n    ├── ollama_manager.py    # Ollama 集成\n    └── select_model.py      # 模型選擇\n```\n\n## 評估結果\n\n### 多指標評估系統\n\n我們實現了全面的多指標評估系統，包含以下主要指標：\n\n#### 1. 語義相似度 (權重 50%)\n- **BERTScore F1**：衡量優化前後文本的語義相似度\n- **平均分數**：0.85\n\n#### 2. 內容覆蓋度 (權重 30%)\n- **ROUGE-1**：unigram 層面的覆蓋度\n- **ROUGE-2**：bigram 層面的覆蓋度\n- **ROUGE-L**：最長公共子序列\n- **平均分數**：0.78\n\n#### 3. 結構化程度 (權重 20%)\n- 章節標題質量\n- 段落結構質量\n- 列表使用適當性\n- **平均分數**：0.82\n\n### 模型表現比較\n\n| 模型 | 綜合得分 | 響應時間 | BERTScore | ROUGE-L |\n|------|---------|---------|-----------|---------|\n| gemma3:4b | 0.85 | 45.2s | 0.88 | 0.75 |\n| llama3-8b | 0.82 | 68.7s | 0.86 | 0.73 |\n| mistral-7b | 0.80 | 52.1s | 0.84 | 0.72 |\n\n### 最佳實踐策略排名\n\n1. **補充省略資訊** (0.92)\n   - 提升內容完整性\n   - 自動補全會議中的隱含資訊\n\n2. **明確標註發言者** (0.89)\n   - 提高可讀性\n   - 便於追蹤討論脈絡\n\n3. **結構化摘要** (0.88)\n   - 提升文件結構化程度\n   - 便於快速瀏覽重點\n\n4. **專業術語標準化** (0.86)\n   - 統一專業術語使用\n   - 提高專業性\n\n5. **標準格式模板** (0.85)\n   - 確保格式一致性\n   - 符合企業規範\n\n> **注意**：詳細評估報告請參考 [評估報告目錄](results/evaluation_reports/)\n\n## 貢獻指南\n\n我們歡迎任何形式的貢獻！以下是參與項目的步驟：\n\n1. Fork 本項目\n2. 創建特性分支 (`git checkout -b feature/amazing-feature`)\n3. 提交更改 (`git commit -m 'Add some amazing feature'`)\n4. 推送到分支 (`git push origin feature/amazing-feature`)\n5. 開啟 Pull Request\n\n### 代碼風格\n- 使用 [Black](https://github.com/psf/black) 進行代碼格式化\n- 使用 [Google 風格的 Python 文檔字符串](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings)\n\n### 提交信息規範\n請遵循 [Conventional Commits](https://www.conventionalcommits.org/) 規範：\n- feat: 新功能\n- fix: 修復 bug\n- docs: 文檔更新\n- style: 代碼格式\n- refactor: 代碼重構\n- test: 測試相關\n- chore: 構建過程或輔助工具的變動\n\n## 專案進度\n\n### 完成情況\n\n1. **基本架構建立** ✅ 已完成\n   - 專案目錄結構\n   - 基礎優化流程\n   - 多模型支援\n\n2. **評估系統實現** ✅ 已完成\n   - ✅ 基本評估框架\n   - ✅ BERTScore 實現\n   - ✅ ROUGE 實現\n   - ✅ 多指標整合\n   - ✅ 評估報告生成\n   - ✅ 評估報告優化 (改為結構化數據格式)\n\n### 當前階段\n\n3. **提示工程優化** 🚀 進行中\n   - 大模型輔助提示詞優化\n   - 非監督學習優化循環\n   - 自動化評估與反饋\n\n### 後續計劃\n\n4. **效能優化** ⏳ 未開始\n   - 並行處理優化\n   - 快取機制實現\n   - 資源使用監控\n\n5. **系統整合** ⏳ 未開始\n   - API 服務封裝\n   - 自動化部署流程\n   - 監控告警系統\n\n## 系統需求與優化\n\n### 硬體配置\n\n- **裝置**：MacBook Pro (M4 晶片)\n- **CPU**：10 核心 (4 個效能核心 + 6 個節能核心)\n- **記憶體**：16GB 統一記憶體\n- **GPU**：Apple M4 整合式顯示晶片\n\n### 模型配置\n\n- **基礎模型**：`cwchang/llama3-taide-lx-8b-chat-alpha1:latest`\n  - 使用 4-bit 量化載入\n  - 主要用於會議記錄生成\n\n- **優化模型**：`google/gemma-3-12b`\n  - 使用 4-bit 量化載入\n  - 用於提示詞優化和改進\n\n## 提示工程優化架構\n\n### 核心組件\n\n1. **會議上下文感知模組**\n   - 自動識別會議類型和特徵\n   - 分析參與者角色和互動模式\n   - 提取關鍵決策點和行動項目\n\n2. **分層提示詞引擎**\n   - 感知層：理解會議本質特徵\n   - 策略層：選擇最優記錄策略\n   - 執行層：生成結構化會議記錄\n\n3. **動態策略管理器**\n   - 多種會議類型的專用策略\n   - 上下文感知的模板選擇\n   - 實時策略調整機制\n\n### 技術實現\n\n```python\n# 會議上下文分析示例\nclass MeetingAnalyzer:\n    def analyze(self, meeting_data: dict) -> MeetingContext:\n        context = MeetingContext()\n        context.meeting_type = self._classify_meeting_type(meeting_data)\n        context.participants = self._extract_participants(meeting_data)\n        context.decision_density = self._calculate_decision_density(meeting_data)\n        return context\n```\n\n### 實施路線圖\n\n#### 階段一：基礎架構重構 (2週)\n- [ ] 實現會議上下文感知模組\n- [ ] 開發分層提示詞引擎基礎框架\n- [ ] 創建3種基礎會議類型的適配器\n\n#### 階段二：動態策略實現 (3週)\n- [ ] 實現策略管理器\n- [ ] 開發模板組件系統\n- [ ] 整合上下文感知評估\n\n#### 階段三：自適應優化 (3週)\n- [ ] 實現強化學習優化器\n- [ ] 設置在線學習循環\n- [ ] 集成知識圖譜\n\n### 預期效益\n\n- **更智能的會議理解**：超越表面指標，理解會議本質\n- **動態適配能力**：根據會議類型自動調整記錄策略\n- **持續優化**：通過在線學習不斷改進表現\n- **更好的可解釋性**：清晰的決策過程和優化路徑\n\n### 技術棧\n\n- **核心框架**：Python 3.9+\n- **機器學習**：PyTorch, Transformers, bitsandbytes (4-bit 量化)\n- **NLP工具**：sentence-transformers, NLTK\n- **記憶體優化**：accelerate, vLLM (可選)\n- **監控工具**：psutil, GPUtil\n\n### 記憶體優化策略\n\n1. **模型量化**\n   - 使用 4-bit 量化技術\n   - 動態量化權重矩陣\n   - 啟用 Flash Attention 2 (如支援)\n\n2. **批次處理**\n   - 小批次處理輸入數據\n   - 實現記憶體監控\n   - 動態調整批次大小\n\n3. **快取機制**\n   - 使用 LRU 快取優化結果\n   - 實現提示詞模板快取\n   - 特徵向量快取\n\n4. **資源監控**\n   - 即時監控記憶體使用\n   - 動態降級機制\n   - 自動清理未使用的資源\n\n### 開發原則\n\n1. **資源效率**：優先考慮記憶體和計算效率\n2. **漸進式增強**：先實現核心功能，再逐步優化\n3. **可觀察性**：完善的監控和日誌記錄\n4. **優雅降級**：在資源受限時自動調整功能\n\n### 效能基準\n\n| 任務 | 預期記憶體使用 | 預期處理時間 |\n|------|--------------|------------|\n| 模型載入 | ~8GB | 30-60秒 |\n| 提示詞優化 | ~12GB | 5-15秒/提示 |\n| 批次處理 (n=5) | ~14GB | 20-40秒 |\n\n> **注意**：實際數值可能因系統負載和具體輸入而異\n\n### 已知限制\n\n1. **記憶體限制**：\n   - 同時載入多個大型模型可能導致記憶體不足\n   - 建議一次只載入一個模型進行推理\n\n2. **處理時間**：\n   - 複雜提示詞可能需要更長處理時間\n   - 批次處理時延遲會增加\n\n3. **建議的最佳實踐**：\n   - 實現請求佇列系統\n   - 設定處理超時機制\n   - 定期重啟長時間運行的程序以釋放記憶體\n\n## 最近更新\n\n### 2025-05-28 (最新)\n- 重構提示工程優化架構\n- 實現分層提示詞引擎\n- 新增會議上下文感知模組\n- 設計動態策略管理系統\n- 更新實施路線圖\n\n### 2025-05-27\n- 更新 README 文件，改進文檔結構和內容完整性\n- 修復評估階段文件路徑比對問題\n- 優化模型名稱處理邏輯，支援不同格式的模型名稱\n- 改進評估腳本，可選擇性評估特定模型的結果\n- 更新 `run_optimization.sh` 腳本，確保正確傳遞模型參數\n- 改進錯誤處理和日誌記錄\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-27\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 改進模型名稱處理邏輯\n- 優化錯誤處理和重試機制\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-26\n- 實現模型響應時間追蹤\n- 優化模型調用過程中的錯誤處理\n- 改進重試機制，提高穩定性\n\n### 2025-05-25\n- 修復 `time` 模組導入問題\n- 修正 `model_timings` 和 `strategy_timings` 變數作用域問題\n- 更新評估結果和改進策略\n\n## 授權\n\n本項目採用 [MIT 許可證](LICENSE) 授權。",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是改進後的會議記錄模板，旨在提高準確性、完整性、清晰度和專業性：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理)\n\n**日期:** {日期}\n\n**時間:** {會議時間} (包含開始和結束時間)\n\n**地點:** {會議地點} (如果適用)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 備註 (例如：出席狀態) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 備註 (例如：關鍵數據、爭論焦點) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (例如：未開始、進行中、已完成) | 相關文件/連結 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施}\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**改進說明:**\n\n*   **更具體的標題:** 鼓勵使用更具體、描述性的會議標題，方便查找和分類。\n*   **會議編號:** 增加會議編號，方便追蹤和管理。\n*   **與會人員表格:**  提供一個表格，更清晰地記錄與會人員的資訊，並能記錄其出席狀態。\n*   **會議目的:** 明确會議的目的，方便後續回顾和评估。\n*   **會議摘要:**  提供一個摘要，方便快速了解會議重點。\n*   **討論要點表格:**  將討論要點整理成表格，更清晰地記錄討論內容、參與者和關鍵資訊。\n*   **行動項目表格:**  將行動項目整理成表格，包含負責人、行動項目、截止日期和狀態，方便追蹤和管理。\n*   **風險評估 (可選):**  增加風險評估部分，幫助識別和管理會議中可能出現的風險。\n*   **簽署:**  增加簽署欄位，確保記錄的有效性。\n\n**提示:**\n\n*   在會議結束後立即記錄，以確保資訊的準確性。\n*   使用清晰、簡潔的語言，避免使用含糊不清的術語。\n*   在記錄過程中，積極參與討論，並記錄關鍵資訊。\n*   在會議結束後，儘快將記錄發送給與會人員，並徵求他們的意見。\n\n希望這個改進後的模板能幫助您更好地記錄會議，並提高會議效率。  如果您有任何其他要求或需要調整的地方，請隨時提出。\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是改進後的會議記錄模板，旨在提高準確性、完整性、清晰度和專業性：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理)\n\n**日期:** {日期}\n\n**時間:** {會議時間} (包含開始和結束時間)\n\n**地點:** {會議地點} (如果適用)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 備註 (例如：出席狀態) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 備註 (例如：關鍵數據、爭論焦點) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (例如：未開始、進行中、已完成) | 相關文件/連結 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施}\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**改進說明:**\n\n*   **更具體的標題:** 鼓勵使用更具體、描述性的會議標題，方便查找和分類。\n*   **會議編號:** 增加會議編號，方便追蹤和管理。\n*   **與會人員表格:**  提供一個表格，更清晰地記錄與會人員的資訊，並能記錄其出席狀態。\n*   **會議目的:** 明确會議的目的，方便後續回顾和评估。\n*   **會議摘要:**  提供一個摘要，方便快速了解會議重點。\n*   **討論要點表格:**  將討論要點整理成表格，更清晰地記錄討論內容、參與者和關鍵資訊。\n*   **行動項目表格:**  將行動項目整理成表格，包含負責人、行動項目、截止日期和狀態，方便追蹤和管理。\n*   **風險評估 (可選):**  增加風險評估部分，幫助識別和管理會議中可能出現的風險。\n*   **簽署:**  增加簽署欄位，確保記錄的有效性。\n\n**提示:**\n\n*   在會議結束後立即記錄，以確保資訊的準確性。\n*   使用清晰、簡潔的語言，避免使用含糊不清的術語。\n*   在記錄過程中，積極參與討論，並記錄關鍵資訊。\n*   在會議結束後，儘快將記錄發送給與會人員，並徵求他們的意見。\n\n希望這個改進後的模板能幫助您更好地記錄會議，並提高會議效率。  如果您有任何其他要求或需要調整的地方，請隨時提出。\n\n參考:\n# 會議記錄優化與評估系統\n\n## 專案概述\n\n本專案旨在利用大型語言模型（LLM）來自動優化會議記錄，提高其結構化程度、完整性和可讀性。系統支援多種優化策略，並提供全面的評估框架來衡量優化效果。\n\n## 主要功能\n\n- **多策略優化**：支援多種會議記錄優化策略\n- **多模型支援**：可與多種開源和商業語言模型整合\n- **自動化評估**：提供多種評估指標來衡量優化效果\n- **可擴展架構**：易於添加新的優化策略和評估指標\n\n## 快速開始\n\n### 前置需求\n- Python 3.8+\n- Ollama 服務 (用於運行本地模型)\n\n### 安裝步驟\n\n```bash\n# 1. 克隆存儲庫\ngit clone https://github.com/colabbrave/exam08.git\ncd exam08\n\n# 2. 創建並啟動虛擬環境\npython -m venv venv\nsource venv/bin/activate  # Linux/Mac\n# 或\n# .\\venv\\Scripts\\activate  # Windows\n\n# 3. 安裝依賴\npip install -r requirements.txt\n\n# 4. 下載並啟動 Ollama 模型\nollama pull gemma3:4b  # 或其他支援的模型\n```\n\n### 基本用法\n\n```bash\n# 優化會議記錄\n./run_optimization.sh\n\n# 或指定模型\n./run_optimization.sh --model gemma3:4b\n\n# 評估優化結果\npython scripts/evaluate.py --model gemma3_4b\n```\n\n## 專案結構\n\n```\n.\n├── config/                  # 配置文件\n├── data/                    # 數據目錄\n│   ├── reference/           # 參考會議記錄\n│   └── transcript/          # 原始逐字稿\n├── docu/                    # 文檔\n├── logs/                    # 運行日誌\n├── models/                  # 模型文件\n├── prompts/                 # 提示詞模板\n│   ├── base/                # 基礎提示詞\n│   ├── components/          # 提示詞組件\n│   ├── optimized/           # 優化後的提示詞\n│   └── preloaded/           # 預加載的提示詞\n├── results/                 # 結果輸出\n│   ├── evaluation_reports/  # 評估報告\n│   └── optimized/           # 優化後的會議記錄\n└── scripts/                 # 腳本文件\n    ├── evaluate.py          # 評估腳本\n    ├── optimize.py          # 優化腳本\n    ├── model_manager.py     # 模型管理\n    ├── ollama_manager.py    # Ollama 集成\n    └── select_model.py      # 模型選擇\n```\n\n## 評估結果\n\n### 多指標評估系統\n\n我們實現了全面的多指標評估系統，包含以下主要指標：\n\n#### 1. 語義相似度 (權重 50%)\n- **BERTScore F1**：衡量優化前後文本的語義相似度\n- **平均分數**：0.85\n\n#### 2. 內容覆蓋度 (權重 30%)\n- **ROUGE-1**：unigram 層面的覆蓋度\n- **ROUGE-2**：bigram 層面的覆蓋度\n- **ROUGE-L**：最長公共子序列\n- **平均分數**：0.78\n\n#### 3. 結構化程度 (權重 20%)\n- 章節標題質量\n- 段落結構質量\n- 列表使用適當性\n- **平均分數**：0.82\n\n### 模型表現比較\n\n| 模型 | 綜合得分 | 響應時間 | BERTScore | ROUGE-L |\n|------|---------|---------|-----------|---------|\n| gemma3:4b | 0.85 | 45.2s | 0.88 | 0.75 |\n| llama3-8b | 0.82 | 68.7s | 0.86 | 0.73 |\n| mistral-7b | 0.80 | 52.1s | 0.84 | 0.72 |\n\n### 最佳實踐策略排名\n\n1. **補充省略資訊** (0.92)\n   - 提升內容完整性\n   - 自動補全會議中的隱含資訊\n\n2. **明確標註發言者** (0.89)\n   - 提高可讀性\n   - 便於追蹤討論脈絡\n\n3. **結構化摘要** (0.88)\n   - 提升文件結構化程度\n   - 便於快速瀏覽重點\n\n4. **專業術語標準化** (0.86)\n   - 統一專業術語使用\n   - 提高專業性\n\n5. **標準格式模板** (0.85)\n   - 確保格式一致性\n   - 符合企業規範\n\n> **注意**：詳細評估報告請參考 [評估報告目錄](results/evaluation_reports/)\n\n## 貢獻指南\n\n我們歡迎任何形式的貢獻！以下是參與項目的步驟：\n\n1. Fork 本項目\n2. 創建特性分支 (`git checkout -b feature/amazing-feature`)\n3. 提交更改 (`git commit -m 'Add some amazing feature'`)\n4. 推送到分支 (`git push origin feature/amazing-feature`)\n5. 開啟 Pull Request\n\n### 代碼風格\n- 使用 [Black](https://github.com/psf/black) 進行代碼格式化\n- 使用 [Google 風格的 Python 文檔字符串](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings)\n\n### 提交信息規範\n請遵循 [Conventional Commits](https://www.conventionalcommits.org/) 規範：\n- feat: 新功能\n- fix: 修復 bug\n- docs: 文檔更新\n- style: 代碼格式\n- refactor: 代碼重構\n- test: 測試相關\n- chore: 構建過程或輔助工具的變動\n\n## 專案進度\n\n### 完成情況\n\n1. **基本架構建立** ✅ 已完成\n   - 專案目錄結構\n   - 基礎優化流程\n   - 多模型支援\n\n2. **評估系統實現** ✅ 已完成\n   - ✅ 基本評估框架\n   - ✅ BERTScore 實現\n   - ✅ ROUGE 實現\n   - ✅ 多指標整合\n   - ✅ 評估報告生成\n   - ✅ 評估報告優化 (改為結構化數據格式)\n\n### 當前階段\n\n3. **提示工程優化** 🚀 進行中\n   - 大模型輔助提示詞優化\n   - 非監督學習優化循環\n   - 自動化評估與反饋\n\n### 後續計劃\n\n4. **效能優化** ⏳ 未開始\n   - 並行處理優化\n   - 快取機制實現\n   - 資源使用監控\n\n5. **系統整合** ⏳ 未開始\n   - API 服務封裝\n   - 自動化部署流程\n   - 監控告警系統\n\n## 系統需求與優化\n\n### 硬體配置\n\n- **裝置**：MacBook Pro (M4 晶片)\n- **CPU**：10 核心 (4 個效能核心 + 6 個節能核心)\n- **記憶體**：16GB 統一記憶體\n- **GPU**：Apple M4 整合式顯示晶片\n\n### 模型配置\n\n- **基礎模型**：`cwchang/llama3-taide-lx-8b-chat-alpha1:latest`\n  - 使用 4-bit 量化載入\n  - 主要用於會議記錄生成\n\n- **優化模型**：`google/gemma-3-12b`\n  - 使用 4-bit 量化載入\n  - 用於提示詞優化和改進\n\n## 提示工程優化架構\n\n### 核心組件\n\n1. **會議上下文感知模組**\n   - 自動識別會議類型和特徵\n   - 分析參與者角色和互動模式\n   - 提取關鍵決策點和行動項目\n\n2. **分層提示詞引擎**\n   - 感知層：理解會議本質特徵\n   - 策略層：選擇最優記錄策略\n   - 執行層：生成結構化會議記錄\n\n3. **動態策略管理器**\n   - 多種會議類型的專用策略\n   - 上下文感知的模板選擇\n   - 實時策略調整機制\n\n### 技術實現\n\n```python\n# 會議上下文分析示例\nclass MeetingAnalyzer:\n    def analyze(self, meeting_data: dict) -> MeetingContext:\n        context = MeetingContext()\n        context.meeting_type = self._classify_meeting_type(meeting_data)\n        context.participants = self._extract_participants(meeting_data)\n        context.decision_density = self._calculate_decision_density(meeting_data)\n        return context\n```\n\n### 實施路線圖\n\n#### 階段一：基礎架構重構 (2週)\n- [ ] 實現會議上下文感知模組\n- [ ] 開發分層提示詞引擎基礎框架\n- [ ] 創建3種基礎會議類型的適配器\n\n#### 階段二：動態策略實現 (3週)\n- [ ] 實現策略管理器\n- [ ] 開發模板組件系統\n- [ ] 整合上下文感知評估\n\n#### 階段三：自適應優化 (3週)\n- [ ] 實現強化學習優化器\n- [ ] 設置在線學習循環\n- [ ] 集成知識圖譜\n\n### 預期效益\n\n- **更智能的會議理解**：超越表面指標，理解會議本質\n- **動態適配能力**：根據會議類型自動調整記錄策略\n- **持續優化**：通過在線學習不斷改進表現\n- **更好的可解釋性**：清晰的決策過程和優化路徑\n\n### 技術棧\n\n- **核心框架**：Python 3.9+\n- **機器學習**：PyTorch, Transformers, bitsandbytes (4-bit 量化)\n- **NLP工具**：sentence-transformers, NLTK\n- **記憶體優化**：accelerate, vLLM (可選)\n- **監控工具**：psutil, GPUtil\n\n### 記憶體優化策略\n\n1. **模型量化**\n   - 使用 4-bit 量化技術\n   - 動態量化權重矩陣\n   - 啟用 Flash Attention 2 (如支援)\n\n2. **批次處理**\n   - 小批次處理輸入數據\n   - 實現記憶體監控\n   - 動態調整批次大小\n\n3. **快取機制**\n   - 使用 LRU 快取優化結果\n   - 實現提示詞模板快取\n   - 特徵向量快取\n\n4. **資源監控**\n   - 即時監控記憶體使用\n   - 動態降級機制\n   - 自動清理未使用的資源\n\n### 開發原則\n\n1. **資源效率**：優先考慮記憶體和計算效率\n2. **漸進式增強**：先實現核心功能，再逐步優化\n3. **可觀察性**：完善的監控和日誌記錄\n4. **優雅降級**：在資源受限時自動調整功能\n\n### 效能基準\n\n| 任務 | 預期記憶體使用 | 預期處理時間 |\n|------|--------------|------------|\n| 模型載入 | ~8GB | 30-60秒 |\n| 提示詞優化 | ~12GB | 5-15秒/提示 |\n| 批次處理 (n=5) | ~14GB | 20-40秒 |\n\n> **注意**：實際數值可能因系統負載和具體輸入而異\n\n### 已知限制\n\n1. **記憶體限制**：\n   - 同時載入多個大型模型可能導致記憶體不足\n   - 建議一次只載入一個模型進行推理\n\n2. **處理時間**：\n   - 複雜提示詞可能需要更長處理時間\n   - 批次處理時延遲會增加\n\n3. **建議的最佳實踐**：\n   - 實現請求佇列系統\n   - 設定處理超時機制\n   - 定期重啟長時間運行的程序以釋放記憶體\n\n## 最近更新\n\n### 2025-05-28 (最新)\n- 重構提示工程優化架構\n- 實現分層提示詞引擎\n- 新增會議上下文感知模組\n- 設計動態策略管理系統\n- 更新實施路線圖\n\n### 2025-05-27\n- 更新 README 文件，改進文檔結構和內容完整性\n- 修復評估階段文件路徑比對問題\n- 優化模型名稱處理邏輯，支援不同格式的模型名稱\n- 改進評估腳本，可選擇性評估特定模型的結果\n- 更新 `run_optimization.sh` 腳本，確保正確傳遞模型參數\n- 改進錯誤處理和日誌記錄\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-27\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 改進模型名稱處理邏輯\n- 優化錯誤處理和重試機制\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-26\n- 實現模型響應時間追蹤\n- 優化模型調用過程中的錯誤處理\n- 改進重試機制，提高穩定性\n\n### 2025-05-25\n- 修復 `time` 模組導入問題\n- 修正 `model_timings` 和 `strategy_timings` 變數作用域問題\n- 更新評估結果和改進策略\n\n## 授權\n\n本項目採用 [MIT 許可證](LICENSE) 授權。"
        ]
      },
      "timestamp": "2025-05-28T14:24:34.979717"
    },
    {
      "iteration": 3,
      "stability_score": 0.8000000000000002,
      "quality_score": 0.0,
      "overall_score": 0.4800000000000001,
      "metrics": {
        "stability_score": 0.8000000000000002,
        "quality_score": 0.0,
        "overall_score": 0.4800000000000001,
        "stability_metrics": {
          "format_consistency": 1.0000000000000002,
          "length_stability": 1.0,
          "key_element_coverage": 0.3333333333333333,
          "semantic_stability": 1.0000000000000002,
          "overall_stability": 0.8000000000000002
        },
        "quality_metrics": {
          "categories": {
            "semantic_similarity": {
              "name": "semantic_similarity",
              "score": 0.0,
              "metrics": {
                "bertscore_f1": {
                  "score": 0.0,
                  "weight": 1.0,
                  "details": {
                    "error": "unhashable type: 'list'"
                  }
                }
              }
            },
            "content_coverage": {
              "name": "content_coverage",
              "score": 0.0,
              "metrics": {
                "rouge1": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rouge2": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rougeL": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                }
              }
            },
            "structure_quality": {
              "name": "structure_quality",
              "score": 0.0,
              "metrics": {
                "section_heading_quality": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "paragraph_structure": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "list_usage": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                }
              }
            }
          },
          "overall_score": 0.0
        },
        "generated_samples": [
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 出席狀態 (例如：出席、缺席、遲到) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結) |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險}\n\n| 潛在風險 | 影響程度 (高/中/低) | 應對措施 | 負責人 |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**提示:**\n\n*   在會議結束後立即記錄，以確保資訊的準確性。\n*   使用清晰、簡潔的語言，避免使用含糊不清的術語。 盡量使用專業術語。\n*   在記錄過程中，積極參與討論，並記錄關鍵資訊。\n*   在會議結束後，儘快將記錄發送給與會人員，並徵求他們的意見。 鼓勵與會者在會議記錄中補充或修改信息。\n\n**重要說明:**  此模板旨在提供一個結構化的框架。  根據您的具體需求和會議類型，可以適當調整和修改。  請務必保持記錄的準確性和完整性。\n\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 出席狀態 (例如：出席、缺席、遲到) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結) |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險}\n\n| 潛在風險 | 影響程度 (高/中/低) | 應對措施 | 負責人 |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**提示:**\n\n*   在會議結束後立即記錄，以確保資訊的準確性。\n*   使用清晰、簡潔的語言，避免使用含糊不清的術語。 盡量使用專業術語。\n*   在記錄過程中，積極參與討論，並記錄關鍵資訊。\n*   在會議結束後，儘快將記錄發送給與會人員，並徵求他們的意見。 鼓勵與會者在會議記錄中補充或修改信息。\n\n**重要說明:**  此模板旨在提供一個結構化的框架。  根據您的具體需求和會議類型，可以適當調整和修改。  請務必保持記錄的準確性和完整性。\n\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 出席狀態 (例如：出席、缺席、遲到) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結) |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險}\n\n| 潛在風險 | 影響程度 (高/中/低) | 應對措施 | 負責人 |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**提示:**\n\n*   在會議結束後立即記錄，以確保資訊的準確性。\n*   使用清晰、簡潔的語言，避免使用含糊不清的術語。 盡量使用專業術語。\n*   在記錄過程中，積極參與討論，並記錄關鍵資訊。\n*   在會議結束後，儘快將記錄發送給與會人員，並徵求他們的意見。 鼓勵與會者在會議記錄中補充或修改信息。\n\n**重要說明:**  此模板旨在提供一個結構化的框架。  根據您的具體需求和會議類型，可以適當調整和修改。  請務必保持記錄的準確性和完整性。\n\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0"
        ]
      },
      "timestamp": "2025-05-28T14:25:08.749753"
    },
    {
      "iteration": 4,
      "stability_score": 0.6539948689629274,
      "quality_score": 0.0,
      "overall_score": 0.3923969213777564,
      "metrics": {
        "stability_score": 0.6539948689629274,
        "quality_score": 0.0,
        "overall_score": 0.3923969213777564,
        "stability_metrics": {
          "format_consistency": 0.9541542037979606,
          "length_stability": 0.6791093096563582,
          "key_element_coverage": 0.3333333333333333,
          "semantic_stability": 0.659633729461338,
          "overall_stability": 0.6539948689629274
        },
        "quality_metrics": {
          "categories": {
            "semantic_similarity": {
              "name": "semantic_similarity",
              "score": 0.0,
              "metrics": {
                "bertscore_f1": {
                  "score": 0.0,
                  "weight": 1.0,
                  "details": {
                    "error": "unhashable type: 'list'"
                  }
                }
              }
            },
            "content_coverage": {
              "name": "content_coverage",
              "score": 0.0,
              "metrics": {
                "rouge1": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rouge2": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rougeL": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                }
              }
            },
            "structure_quality": {
              "name": "structure_quality",
              "score": 0.0,
              "metrics": {
                "section_heading_quality": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "paragraph_structure": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "list_usage": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                }
              }
            }
          },
          "overall_score": 0.0
        },
        "generated_samples": [
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板，旨在提高準確性、完整性、清晰度和專業性：\n\n**會議記錄**\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”、“市場策略方案審查會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01 - 建議使用標準化的編碼系統)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部, Google Meet 會議)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 出席狀態 (例如：出席、缺席、遲到) | 備註 (例如：代表) |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向，審查市場策略方案} (請明確說明會議的最終目標)\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策} (建議包含預期討論重點)\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體，並同意進行A/B測試} (請用簡潔的語言總結會議重點)\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 | 相關文件/連結 (例如：Google Docs 連結) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算，要求團隊在X日內提交詳細方案)\n*   {決議事項 2}\n*   ... (請確保每個決議事項都明確、可衡量)\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Jira 任務連結) | 優先級 (高/中/低) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險} (請評估風險的可能性和影響程度)\n\n| 潛在風險 | 影響程度 (高/中/低) | 應對措施 | 負責人 | 備案 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項，與會者提出的建議} (請記錄任何可能影響後續進程的信息)\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**重要提示:**\n\n*   **記錄時間:** 盡可能在會議結束後立即記錄，以確保資訊的準確性。\n*   **使用標準術語:** 盡量使用行業標準術語，並在必要時提供解釋。\n*   **參與式記錄:** 積極參與討論，並記錄關鍵資訊，並鼓勵與會者提供補充和修改。\n*   **版本控制:**  建立明確的版本控制流程，以便追蹤修改和更新。\n*   **分發:**  在會議結束後，盡快將記錄發送給與會人員，並徵求他們的意見。\n\n**額外建議:**\n\n*   **模板標準化:**  建立標準化的會議記錄模板，以確保一致性和可比性。\n*   **數位化:**  使用數位化工具來記錄和管理會議記錄，以便更容易搜尋和分享。\n\n希望這個改進後的模板能更好地滿足您的需求！\n\n\n參考:\n# 會議記錄優化與評估系統\n\n## 專案概述\n\n本專案旨在利用大型語言模型（LLM）來自動優化會議記錄，提高其結構化程度、完整性和可讀性。系統支援多種優化策略，並提供全面的評估框架來衡量優化效果。\n\n## 主要功能\n\n- **多策略優化**：支援多種會議記錄優化策略\n- **多模型支援**：可與多種開源和商業語言模型整合\n- **自動化評估**：提供多種評估指標來衡量優化效果\n- **可擴展架構**：易於添加新的優化策略和評估指標\n\n## 快速開始\n\n### 前置需求\n- Python 3.8+\n- Ollama 服務 (用於運行本地模型)\n\n### 安裝步驟\n\n```bash\n# 1. 克隆存儲庫\ngit clone https://github.com/colabbrave/exam08.git\ncd exam08\n\n# 2. 創建並啟動虛擬環境\npython -m venv venv\nsource venv/bin/activate  # Linux/Mac\n# 或\n# .\\venv\\Scripts\\activate  # Windows\n\n# 3. 安裝依賴\npip install -r requirements.txt\n\n# 4. 下載並啟動 Ollama 模型\nollama pull gemma3:4b  # 或其他支援的模型\n```\n\n### 基本用法\n\n```bash\n# 優化會議記錄\n./run_optimization.sh\n\n# 或指定模型\n./run_optimization.sh --model gemma3:4b\n\n# 評估優化結果\npython scripts/evaluate.py --model gemma3_4b\n```\n\n## 專案結構\n\n```\n.\n├── config/                  # 配置文件\n├── data/                    # 數據目錄\n│   ├── reference/           # 參考會議記錄\n│   └── transcript/          # 原始逐字稿\n├── docu/                    # 文檔\n├── logs/                    # 運行日誌\n├── models/                  # 模型文件\n├── prompts/                 # 提示詞模板\n│   ├── base/                # 基礎提示詞\n│   ├── components/          # 提示詞組件\n│   ├── optimized/           # 優化後的提示詞\n│   └── preloaded/           # 預加載的提示詞\n├── results/                 # 結果輸出\n│   ├── evaluation_reports/  # 評估報告\n│   └── optimized/           # 優化後的會議記錄\n└── scripts/                 # 腳本文件\n    ├── evaluate.py          # 評估腳本\n    ├── optimize.py          # 優化腳本\n    ├── model_manager.py     # 模型管理\n    ├── ollama_manager.py    # Ollama 集成\n    └── select_model.py      # 模型選擇\n```\n\n## 評估結果\n\n### 多指標評估系統\n\n我們實現了全面的多指標評估系統，包含以下主要指標：\n\n#### 1. 語義相似度 (權重 50%)\n- **BERTScore F1**：衡量優化前後文本的語義相似度\n- **平均分數**：0.85\n\n#### 2. 內容覆蓋度 (權重 30%)\n- **ROUGE-1**：unigram 層面的覆蓋度\n- **ROUGE-2**：bigram 層面的覆蓋度\n- **ROUGE-L**：最長公共子序列\n- **平均分數**：0.78\n\n#### 3. 結構化程度 (權重 20%)\n- 章節標題質量\n- 段落結構質量\n- 列表使用適當性\n- **平均分數**：0.82\n\n### 模型表現比較\n\n| 模型 | 綜合得分 | 響應時間 | BERTScore | ROUGE-L |\n|------|---------|---------|-----------|---------|\n| gemma3:4b | 0.85 | 45.2s | 0.88 | 0.75 |\n| llama3-8b | 0.82 | 68.7s | 0.86 | 0.73 |\n| mistral-7b | 0.80 | 52.1s | 0.84 | 0.72 |\n\n### 最佳實踐策略排名\n\n1. **補充省略資訊** (0.92)\n   - 提升內容完整性\n   - 自動補全會議中的隱含資訊\n\n2. **明確標註發言者** (0.89)\n   - 提高可讀性\n   - 便於追蹤討論脈絡\n\n3. **結構化摘要** (0.88)\n   - 提升文件結構化程度\n   - 便於快速瀏覽重點\n\n4. **專業術語標準化** (0.86)\n   - 統一專業術語使用\n   - 提高專業性\n\n5. **標準格式模板** (0.85)\n   - 確保格式一致性\n   - 符合企業規範\n\n> **注意**：詳細評估報告請參考 [評估報告目錄](results/evaluation_reports/)\n\n## 貢獻指南\n\n我們歡迎任何形式的貢獻！以下是參與項目的步驟：\n\n1. Fork 本項目\n2. 創建特性分支 (`git checkout -b feature/amazing-feature`)\n3. 提交更改 (`git commit -m 'Add some amazing feature'`)\n4. 推送到分支 (`git push origin feature/amazing-feature`)\n5. 開啟 Pull Request\n\n### 代碼風格\n- 使用 [Black](https://github.com/psf/black) 進行代碼格式化\n- 使用 [Google 風格的 Python 文檔字符串](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings)\n\n### 提交信息規範\n請遵循 [Conventional Commits](https://www.conventionalcommits.org/) 規範：\n- feat: 新功能\n- fix: 修復 bug\n- docs: 文檔更新\n- style: 代碼格式\n- refactor: 代碼重構\n- test: 測試相關\n- chore: 構建過程或輔助工具的變動\n\n## 專案進度\n\n### 完成情況\n\n1. **基本架構建立** ✅ 已完成\n   - 專案目錄結構\n   - 基礎優化流程\n   - 多模型支援\n\n2. **評估系統實現** ✅ 已完成\n   - ✅ 基本評估框架\n   - ✅ BERTScore 實現\n   - ✅ ROUGE 實現\n   - ✅ 多指標整合\n   - ✅ 評估報告生成\n   - ✅ 評估報告優化 (改為結構化數據格式)\n\n### 當前階段\n\n3. **提示工程優化** 🚀 進行中\n   - 大模型輔助提示詞優化\n   - 非監督學習優化循環\n   - 自動化評估與反饋\n\n### 後續計劃\n\n4. **效能優化** ⏳ 未開始\n   - 並行處理優化\n   - 快取機制實現\n   - 資源使用監控\n\n5. **系統整合** ⏳ 未開始\n   - API 服務封裝\n   - 自動化部署流程\n   - 監控告警系統\n\n## 系統需求與優化\n\n### 硬體配置\n\n- **裝置**：MacBook Pro (M4 晶片)\n- **CPU**：10 核心 (4 個效能核心 + 6 個節能核心)\n- **記憶體**：16GB 統一記憶體\n- **GPU**：Apple M4 整合式顯示晶片\n\n### 模型配置\n\n- **基礎模型**：`cwchang/llama3-taide-lx-8b-chat-alpha1:latest`\n  - 使用 4-bit 量化載入\n  - 主要用於會議記錄生成\n\n- **優化模型**：`google/gemma-3-12b`\n  - 使用 4-bit 量化載入\n  - 用於提示詞優化和改進\n\n## 提示工程優化架構\n\n### 核心組件\n\n1. **會議上下文感知模組**\n   - 自動識別會議類型和特徵\n   - 分析參與者角色和互動模式\n   - 提取關鍵決策點和行動項目\n\n2. **分層提示詞引擎**\n   - 感知層：理解會議本質特徵\n   - 策略層：選擇最優記錄策略\n   - 執行層：生成結構化會議記錄\n\n3. **動態策略管理器**\n   - 多種會議類型的專用策略\n   - 上下文感知的模板選擇\n   - 實時策略調整機制\n\n### 技術實現\n\n```python\n# 會議上下文分析示例\nclass MeetingAnalyzer:\n    def analyze(self, meeting_data: dict) -> MeetingContext:\n        context = MeetingContext()\n        context.meeting_type = self._classify_meeting_type(meeting_data)\n        context.participants = self._extract_participants(meeting_data)\n        context.decision_density = self._calculate_decision_density(meeting_data)\n        return context\n```\n\n### 實施路線圖\n\n#### 階段一：基礎架構重構 (2週)\n- [ ] 實現會議上下文感知模組\n- [ ] 開發分層提示詞引擎基礎框架\n- [ ] 創建3種基礎會議類型的適配器\n\n#### 階段二：動態策略實現 (3週)\n- [ ] 實現策略管理器\n- [ ] 開發模板組件系統\n- [ ] 整合上下文感知評估\n\n#### 階段三：自適應優化 (3週)\n- [ ] 實現強化學習優化器\n- [ ] 設置在線學習循環\n- [ ] 集成知識圖譜\n\n### 預期效益\n\n- **更智能的會議理解**：超越表面指標，理解會議本質\n- **動態適配能力**：根據會議類型自動調整記錄策略\n- **持續優化**：通過在線學習不斷改進表現\n- **更好的可解釋性**：清晰的決策過程和優化路徑\n\n### 技術棧\n\n- **核心框架**：Python 3.9+\n- **機器學習**：PyTorch, Transformers, bitsandbytes (4-bit 量化)\n- **NLP工具**：sentence-transformers, NLTK\n- **記憶體優化**：accelerate, vLLM (可選)\n- **監控工具**：psutil, GPUtil\n\n### 記憶體優化策略\n\n1. **模型量化**\n   - 使用 4-bit 量化技術\n   - 動態量化權重矩陣\n   - 啟用 Flash Attention 2 (如支援)\n\n2. **批次處理**\n   - 小批次處理輸入數據\n   - 實現記憶體監控\n   - 動態調整批次大小\n\n3. **快取機制**\n   - 使用 LRU 快取優化結果\n   - 實現提示詞模板快取\n   - 特徵向量快取\n\n4. **資源監控**\n   - 即時監控記憶體使用\n   - 動態降級機制\n   - 自動清理未使用的資源\n\n### 開發原則\n\n1. **資源效率**：優先考慮記憶體和計算效率\n2. **漸進式增強**：先實現核心功能，再逐步優化\n3. **可觀察性**：完善的監控和日誌記錄\n4. **優雅降級**：在資源受限時自動調整功能\n\n### 效能基準\n\n| 任務 | 預期記憶體使用 | 預期處理時間 |\n|------|--------------|------------|\n| 模型載入 | ~8GB | 30-60秒 |\n| 提示詞優化 | ~12GB | 5-15秒/提示 |\n| 批次處理 (n=5) | ~14GB | 20-40秒 |\n\n> **注意**：實際數值可能因系統負載和具體輸入而異\n\n### 已知限制\n\n1. **記憶體限制**：\n   - 同時載入多個大型模型可能導致記憶體不足\n   - 建議一次只載入一個模型進行推理\n\n2. **處理時間**：\n   - 複雜提示詞可能需要更長處理時間\n   - 批次處理時延遲會增加\n\n3. **建議的最佳實踐**：\n   - 實現請求佇列系統\n   - 設定處理超時機制\n   - 定期重啟長時間運行的程序以釋放記憶體\n\n## 最近更新\n\n### 2025-05-28 (最新)\n- 重構提示工程優化架構\n- 實現分層提示詞引擎\n- 新增會議上下文感知模組\n- 設計動態策略管理系統\n- 更新實施路線圖\n\n### 2025-05-27\n- 更新 README 文件，改進文檔結構和內容完整性\n- 修復評估階段文件路徑比對問題\n- 優化模型名稱處理邏輯，支援不同格式的模型名稱\n- 改進評估腳本，可選擇性評估特定模型的結果\n- 更新 `run_optimization.sh` 腳本，確保正確傳遞模型參數\n- 改進錯誤處理和日誌記錄\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-27\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 改進模型名稱處理邏輯\n- 優化錯誤處理和重試機制\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-26\n- 實現模型響應時間追蹤\n- 優化模型調用過程中的錯誤處理\n- 改進重試機制，提高穩定性\n\n### 2025-05-25\n- 修復 `time` 模組導入問題\n- 修正 `model_timings` 和 `strategy_timings` 變數作用域問題\n- 更新評估結果和改進策略\n\n## 授權\n\n本項目採用 [MIT 許可證](LICENSE) 授權。",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板，旨在提高準確性、完整性、清晰度和專業性：\n\n**會議記錄**\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”、“市場策略方案審查會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01 - 建議使用標準化的編碼系統)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部, Google Meet 會議)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 出席狀態 (例如：出席、缺席、遲到) | 備註 (例如：代表) |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向，審查市場策略方案} (請明確說明會議的最終目標)\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策} (建議包含預期討論重點)\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體，並同意進行A/B測試} (請用簡潔的語言總結會議重點)\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 | 相關文件/連結 (例如：Google Docs 連結) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算，要求團隊在X日內提交詳細方案)\n*   {決議事項 2}\n*   ... (請確保每個決議事項都明確、可衡量)\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Jira 任務連結) | 優先級 (高/中/低) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險} (請評估風險的可能性和影響程度)\n\n| 潛在風險 | 影響程度 (高/中/低) | 應對措施 | 負責人 | 備案 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項，與會者提出的建議} (請記錄任何可能影響後續進程的信息)\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**重要提示:**\n\n*   **記錄時間:** 盡可能在會議結束後立即記錄，以確保資訊的準確性。\n*   **使用標準術語:** 盡量使用行業標準術語，並在必要時提供解釋。\n*   **參與式記錄:** 積極參與討論，並記錄關鍵資訊，並鼓勵與會者提供補充和修改。\n*   **版本控制:**  建立明確的版本控制流程，以便追蹤修改和更新。\n*   **分發:**  在會議結束後，盡快將記錄發送給與會人員，並徵求他們的意見。\n\n**額外建議:**\n\n*   **模板標準化:**  建立標準化的會議記錄模板，以確保一致性和可比性。\n*   **數位化:**  使用數位化工具來記錄和管理會議記錄，以便更容易搜尋和分享。\n\n希望這個改進後的模板能更好地滿足您的需求！\n\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板，旨在提高準確性、完整性、清晰度和專業性：\n\n**會議記錄**\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”、“市場策略方案審查會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01 - 建議使用標準化的編碼系統)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部, Google Meet 會議)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職務 | 出席狀態 (例如：出席、缺席、遲到) | 備註 (例如：代表) |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向，審查市場策略方案} (請明確說明會議的最終目標)\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策} (建議包含預期討論重點)\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體，並同意進行A/B測試} (請用簡潔的語言總結會議重點)\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 | 相關文件/連結 (例如：Google Docs 連結) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算，要求團隊在X日內提交詳細方案)\n*   {決議事項 2}\n*   ... (請確保每個決議事項都明確、可衡量)\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Jira 任務連結) | 優先級 (高/中/低) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險} (請評估風險的可能性和影響程度)\n\n| 潛在風險 | 影響程度 (高/中/低) | 應對措施 | 負責人 | 備案 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項，與會者提出的建議} (請記錄任何可能影響後續進程的信息)\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**重要提示:**\n\n*   **記錄時間:** 盡可能在會議結束後立即記錄，以確保資訊的準確性。\n*   **使用標準術語:** 盡量使用行業標準術語，並在必要時提供解釋。\n*   **參與式記錄:** 積極參與討論，並記錄關鍵資訊，並鼓勵與會者提供補充和修改。\n*   **版本控制:**  建立明確的版本控制流程，以便追蹤修改和更新。\n*   **分發:**  在會議結束後，盡快將記錄發送給與會人員，並徵求他們的意見。\n\n**額外建議:**\n\n*   **模板標準化:**  建立標準化的會議記錄模板，以確保一致性和可比性。\n*   **數位化:**  使用數位化工具來記錄和管理會議記錄，以便更容易搜尋和分享。\n\n希望這個改進後的模板能更好地滿足您的需求！\n\n\n參考:\n# 會議記錄優化與評估系統\n\n## 專案概述\n\n本專案旨在利用大型語言模型（LLM）來自動優化會議記錄，提高其結構化程度、完整性和可讀性。系統支援多種優化策略，並提供全面的評估框架來衡量優化效果。\n\n## 主要功能\n\n- **多策略優化**：支援多種會議記錄優化策略\n- **多模型支援**：可與多種開源和商業語言模型整合\n- **自動化評估**：提供多種評估指標來衡量優化效果\n- **可擴展架構**：易於添加新的優化策略和評估指標\n\n## 快速開始\n\n### 前置需求\n- Python 3.8+\n- Ollama 服務 (用於運行本地模型)\n\n### 安裝步驟\n\n```bash\n# 1. 克隆存儲庫\ngit clone https://github.com/colabbrave/exam08.git\ncd exam08\n\n# 2. 創建並啟動虛擬環境\npython -m venv venv\nsource venv/bin/activate  # Linux/Mac\n# 或\n# .\\venv\\Scripts\\activate  # Windows\n\n# 3. 安裝依賴\npip install -r requirements.txt\n\n# 4. 下載並啟動 Ollama 模型\nollama pull gemma3:4b  # 或其他支援的模型\n```\n\n### 基本用法\n\n```bash\n# 優化會議記錄\n./run_optimization.sh\n\n# 或指定模型\n./run_optimization.sh --model gemma3:4b\n\n# 評估優化結果\npython scripts/evaluate.py --model gemma3_4b\n```\n\n## 專案結構\n\n```\n.\n├── config/                  # 配置文件\n├── data/                    # 數據目錄\n│   ├── reference/           # 參考會議記錄\n│   └── transcript/          # 原始逐字稿\n├── docu/                    # 文檔\n├── logs/                    # 運行日誌\n├── models/                  # 模型文件\n├── prompts/                 # 提示詞模板\n│   ├── base/                # 基礎提示詞\n│   ├── components/          # 提示詞組件\n│   ├── optimized/           # 優化後的提示詞\n│   └── preloaded/           # 預加載的提示詞\n├── results/                 # 結果輸出\n│   ├── evaluation_reports/  # 評估報告\n│   └── optimized/           # 優化後的會議記錄\n└── scripts/                 # 腳本文件\n    ├── evaluate.py          # 評估腳本\n    ├── optimize.py          # 優化腳本\n    ├── model_manager.py     # 模型管理\n    ├── ollama_manager.py    # Ollama 集成\n    └── select_model.py      # 模型選擇\n```\n\n## 評估結果\n\n### 多指標評估系統\n\n我們實現了全面的多指標評估系統，包含以下主要指標：\n\n#### 1. 語義相似度 (權重 50%)\n- **BERTScore F1**：衡量優化前後文本的語義相似度\n- **平均分數**：0.85\n\n#### 2. 內容覆蓋度 (權重 30%)\n- **ROUGE-1**：unigram 層面的覆蓋度\n- **ROUGE-2**：bigram 層面的覆蓋度\n- **ROUGE-L**：最長公共子序列\n- **平均分數**：0.78\n\n#### 3. 結構化程度 (權重 20%)\n- 章節標題質量\n- 段落結構質量\n- 列表使用適當性\n- **平均分數**：0.82\n\n### 模型表現比較\n\n| 模型 | 綜合得分 | 響應時間 | BERTScore | ROUGE-L |\n|------|---------|---------|-----------|---------|\n| gemma3:4b | 0.85 | 45.2s | 0.88 | 0.75 |\n| llama3-8b | 0.82 | 68.7s | 0.86 | 0.73 |\n| mistral-7b | 0.80 | 52.1s | 0.84 | 0.72 |\n\n### 最佳實踐策略排名\n\n1. **補充省略資訊** (0.92)\n   - 提升內容完整性\n   - 自動補全會議中的隱含資訊\n\n2. **明確標註發言者** (0.89)\n   - 提高可讀性\n   - 便於追蹤討論脈絡\n\n3. **結構化摘要** (0.88)\n   - 提升文件結構化程度\n   - 便於快速瀏覽重點\n\n4. **專業術語標準化** (0.86)\n   - 統一專業術語使用\n   - 提高專業性\n\n5. **標準格式模板** (0.85)\n   - 確保格式一致性\n   - 符合企業規範\n\n> **注意**：詳細評估報告請參考 [評估報告目錄](results/evaluation_reports/)\n\n## 貢獻指南\n\n我們歡迎任何形式的貢獻！以下是參與項目的步驟：\n\n1. Fork 本項目\n2. 創建特性分支 (`git checkout -b feature/amazing-feature`)\n3. 提交更改 (`git commit -m 'Add some amazing feature'`)\n4. 推送到分支 (`git push origin feature/amazing-feature`)\n5. 開啟 Pull Request\n\n### 代碼風格\n- 使用 [Black](https://github.com/psf/black) 進行代碼格式化\n- 使用 [Google 風格的 Python 文檔字符串](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings)\n\n### 提交信息規範\n請遵循 [Conventional Commits](https://www.conventionalcommits.org/) 規範：\n- feat: 新功能\n- fix: 修復 bug\n- docs: 文檔更新\n- style: 代碼格式\n- refactor: 代碼重構\n- test: 測試相關\n- chore: 構建過程或輔助工具的變動\n\n## 專案進度\n\n### 完成情況\n\n1. **基本架構建立** ✅ 已完成\n   - 專案目錄結構\n   - 基礎優化流程\n   - 多模型支援\n\n2. **評估系統實現** ✅ 已完成\n   - ✅ 基本評估框架\n   - ✅ BERTScore 實現\n   - ✅ ROUGE 實現\n   - ✅ 多指標整合\n   - ✅ 評估報告生成\n   - ✅ 評估報告優化 (改為結構化數據格式)\n\n### 當前階段\n\n3. **提示工程優化** 🚀 進行中\n   - 大模型輔助提示詞優化\n   - 非監督學習優化循環\n   - 自動化評估與反饋\n\n### 後續計劃\n\n4. **效能優化** ⏳ 未開始\n   - 並行處理優化\n   - 快取機制實現\n   - 資源使用監控\n\n5. **系統整合** ⏳ 未開始\n   - API 服務封裝\n   - 自動化部署流程\n   - 監控告警系統\n\n## 系統需求與優化\n\n### 硬體配置\n\n- **裝置**：MacBook Pro (M4 晶片)\n- **CPU**：10 核心 (4 個效能核心 + 6 個節能核心)\n- **記憶體**：16GB 統一記憶體\n- **GPU**：Apple M4 整合式顯示晶片\n\n### 模型配置\n\n- **基礎模型**：`cwchang/llama3-taide-lx-8b-chat-alpha1:latest`\n  - 使用 4-bit 量化載入\n  - 主要用於會議記錄生成\n\n- **優化模型**：`google/gemma-3-12b`\n  - 使用 4-bit 量化載入\n  - 用於提示詞優化和改進\n\n## 提示工程優化架構\n\n### 核心組件\n\n1. **會議上下文感知模組**\n   - 自動識別會議類型和特徵\n   - 分析參與者角色和互動模式\n   - 提取關鍵決策點和行動項目\n\n2. **分層提示詞引擎**\n   - 感知層：理解會議本質特徵\n   - 策略層：選擇最優記錄策略\n   - 執行層：生成結構化會議記錄\n\n3. **動態策略管理器**\n   - 多種會議類型的專用策略\n   - 上下文感知的模板選擇\n   - 實時策略調整機制\n\n### 技術實現\n\n```python\n# 會議上下文分析示例\nclass MeetingAnalyzer:\n    def analyze(self, meeting_data: dict) -> MeetingContext:\n        context = MeetingContext()\n        context.meeting_type = self._classify_meeting_type(meeting_data)\n        context.participants = self._extract_participants(meeting_data)\n        context.decision_density = self._calculate_decision_density(meeting_data)\n        return context\n```\n\n### 實施路線圖\n\n#### 階段一：基礎架構重構 (2週)\n- [ ] 實現會議上下文感知模組\n- [ ] 開發分層提示詞引擎基礎框架\n- [ ] 創建3種基礎會議類型的適配器\n\n#### 階段二：動態策略實現 (3週)\n- [ ] 實現策略管理器\n- [ ] 開發模板組件系統\n- [ ] 整合上下文感知評估\n\n#### 階段三：自適應優化 (3週)\n- [ ] 實現強化學習優化器\n- [ ] 設置在線學習循環\n- [ ] 集成知識圖譜\n\n### 預期效益\n\n- **更智能的會議理解**：超越表面指標，理解會議本質\n- **動態適配能力**：根據會議類型自動調整記錄策略\n- **持續優化**：通過在線學習不斷改進表現\n- **更好的可解釋性**：清晰的決策過程和優化路徑\n\n### 技術棧\n\n- **核心框架**：Python 3.9+\n- **機器學習**：PyTorch, Transformers, bitsandbytes (4-bit 量化)\n- **NLP工具**：sentence-transformers, NLTK\n- **記憶體優化**：accelerate, vLLM (可選)\n- **監控工具**：psutil, GPUtil\n\n### 記憶體優化策略\n\n1. **模型量化**\n   - 使用 4-bit 量化技術\n   - 動態量化權重矩陣\n   - 啟用 Flash Attention 2 (如支援)\n\n2. **批次處理**\n   - 小批次處理輸入數據\n   - 實現記憶體監控\n   - 動態調整批次大小\n\n3. **快取機制**\n   - 使用 LRU 快取優化結果\n   - 實現提示詞模板快取\n   - 特徵向量快取\n\n4. **資源監控**\n   - 即時監控記憶體使用\n   - 動態降級機制\n   - 自動清理未使用的資源\n\n### 開發原則\n\n1. **資源效率**：優先考慮記憶體和計算效率\n2. **漸進式增強**：先實現核心功能，再逐步優化\n3. **可觀察性**：完善的監控和日誌記錄\n4. **優雅降級**：在資源受限時自動調整功能\n\n### 效能基準\n\n| 任務 | 預期記憶體使用 | 預期處理時間 |\n|------|--------------|------------|\n| 模型載入 | ~8GB | 30-60秒 |\n| 提示詞優化 | ~12GB | 5-15秒/提示 |\n| 批次處理 (n=5) | ~14GB | 20-40秒 |\n\n> **注意**：實際數值可能因系統負載和具體輸入而異\n\n### 已知限制\n\n1. **記憶體限制**：\n   - 同時載入多個大型模型可能導致記憶體不足\n   - 建議一次只載入一個模型進行推理\n\n2. **處理時間**：\n   - 複雜提示詞可能需要更長處理時間\n   - 批次處理時延遲會增加\n\n3. **建議的最佳實踐**：\n   - 實現請求佇列系統\n   - 設定處理超時機制\n   - 定期重啟長時間運行的程序以釋放記憶體\n\n## 最近更新\n\n### 2025-05-28 (最新)\n- 重構提示工程優化架構\n- 實現分層提示詞引擎\n- 新增會議上下文感知模組\n- 設計動態策略管理系統\n- 更新實施路線圖\n\n### 2025-05-27\n- 更新 README 文件，改進文檔結構和內容完整性\n- 修復評估階段文件路徑比對問題\n- 優化模型名稱處理邏輯，支援不同格式的模型名稱\n- 改進評估腳本，可選擇性評估特定模型的結果\n- 更新 `run_optimization.sh` 腳本，確保正確傳遞模型參數\n- 改進錯誤處理和日誌記錄\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-27\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 改進模型名稱處理邏輯\n- 優化錯誤處理和重試機制\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-26\n- 實現模型響應時間追蹤\n- 優化模型調用過程中的錯誤處理\n- 改進重試機制，提高穩定性\n\n### 2025-05-25\n- 修復 `time` 模組導入問題\n- 修正 `model_timings` 和 `strategy_timings` 變數作用域問題\n- 更新評估結果和改進策略\n\n## 授權\n\n本項目採用 [MIT 許可證](LICENSE) 授權。"
        ]
      },
      "timestamp": "2025-05-28T14:25:51.787861"
    },
    {
      "iteration": 5,
      "stability_score": 0.7054856853776003,
      "quality_score": 0.0,
      "overall_score": 0.42329141122656017,
      "metrics": {
        "stability_score": 0.7054856853776003,
        "quality_score": 0.0,
        "overall_score": 0.42329141122656017,
        "stability_metrics": {
          "format_consistency": 0.9792047711327246,
          "length_stability": 0.8088875069876775,
          "key_element_coverage": 0.3333333333333333,
          "semantic_stability": 0.7497337632012367,
          "overall_stability": 0.7054856853776003
        },
        "quality_metrics": {
          "categories": {
            "semantic_similarity": {
              "name": "semantic_similarity",
              "score": 0.0,
              "metrics": {
                "bertscore_f1": {
                  "score": 0.0,
                  "weight": 1.0,
                  "details": {
                    "error": "unhashable type: 'list'"
                  }
                }
              }
            },
            "content_coverage": {
              "name": "content_coverage",
              "score": 0.0,
              "metrics": {
                "rouge1": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rouge2": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rougeL": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                }
              }
            },
            "structure_quality": {
              "name": "structure_quality",
              "score": 0.0,
              "metrics": {
                "section_heading_quality": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "paragraph_structure": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "list_usage": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                }
              }
            }
          },
          "overall_score": 0.0
        },
        "generated_samples": [
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板，旨在提升其準確性、完整性、清晰度和專業性：\n\n**會議記錄**\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”、“市場策略方案審查會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01 - 建議使用標準化編碼系統)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部; 視訊會議 - Google Meet, Microsoft Teams)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職稱 | 出席狀態 (例如：出席、缺席、遲到、視訊出席) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向；審查市場策略方案，確定目標市場和推廣方案}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策 - 建議使用時間軸格式}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體；審查了市場策略方案，並針對競爭格局提出了建議}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 | 相關文件/連結 (例如：Google Drive 連結) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算 - 需明確預算金額和分配比例)\n*   {決議事項 2}\n*   ... (建議將決議事項與相關文件連結)\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結、附件) | 優先級 (高/中/低) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險 - 建議使用風險評估矩阵}\n\n| 潛在風險 | 影響程度 (高/中/低) | 備案措施 | 負責人 | 預期發生時間 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項 - 建議加入跟進機制}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**重要提示:**\n\n*   **記錄準確性至關重要。** 在會議結束後立即記錄，並盡可能詳細地記錄所有討論內容。\n*   **使用專業術語和標準化詞彙。**  確保所有參與者理解使用的術語。\n*   **積極參與討論，並記錄關鍵資訊。**  不要只是記錄會議的內容，還要記錄參與者的觀點和建議。\n*   **鼓勵與會者在會議記錄中補充或修改信息。**  在發送會議記錄之前，請務必徵求與會者的意見。\n*   **建立會議記錄管理流程。**  確定會議記錄的保存、版本控制和分發方式。\n*   **定期審核和更新會議記錄。**  確保會議記錄的準確性和完整性。\n\n**建議附件:**  (可選)  會議記錄應包含相關文件連結，例如：PPT、數據報告、市場分析報告等。\n\n---\n\n**額外建議:**\n\n*   **使用數位會議記錄工具。**  許多工具可以自動記錄會議內容、生成會議摘要和創建行動項目清單。\n*   **建立會議記錄模板。**  使用標準化的模板可以提高會議記錄的效率和一致性。\n\n希望這個更完善的模板能幫助您更好地記錄會議。\n\n參考:\n# 會議記錄優化工具安裝與使用指南\n\n## 環境要求\n\n- Python 3.8 或更高版本\n- CUDA 11.7 或更高版本（如需 GPU 加速）\n- 至少 16GB 系統記憶體（建議 32GB 或更多）\n- 至少 20GB 可用磁碟空間（用於模型快取）\n\n## 安裝步驟\n\n1. 克隆代碼庫：\n   ```bash\n   git clone <repository-url>\n   cd exam08_提示詞練習重啟\n   ```\n\n2. 創建並啟動虛擬環境（建議）：\n   ```bash\n   python -m venv venv\n   source venv/bin/activate  # Linux/Mac\n   # 或\n   .\\venv\\Scripts\\activate  # Windows\n   ```\n\n3. 安裝依賴：\n   ```bash\n   pip install -r requirements.txt\n   ```\n\n4. 安裝 PyTorch（如需 GPU 支援）：\n   ```bash\n   # 請根據您的 CUDA 版本選擇合適的安裝命令\n   # 例如，CUDA 11.8：\n   pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118\n   ```\n\n## 下載模型\n\n本工具支援多種語言模型，預設使用 `cwchang/llama3-taide-lx-8b-chat-alpha1_latest`。\n\n首次運行時，工具會自動下載模型（約 15GB）。確保您有足夠的磁碟空間和穩定的網路連接。\n\n## 使用方法\n\n### 1. 優化單個會議記錄\n\n```bash\npython scripts/optimize_meeting_minutes.py path/to/your/meeting.txt\n```\n\n### 2. 批量處理多個會議記錄\n\n```bash\n# 創建輸出目錄\nmkdir -p optimized_meetings\n\n# 處理目錄中的所有 .txt 文件\nfor f in data/meetings/*.txt; do\n    python scripts/optimize_meeting_minutes.py \"$f\" -o optimized_meetings\ndone\n```\n\n### 3. 評估優化效果\n\n```bash\n# 評估單個優化結果\npython scripts/test_optimization.py --test-dir path/to/test/files --output-dir results/evaluation\n\n# 查看評估報告\ncat results/evaluation/optimization_evaluation.json\n```\n\n## 進階選項\n\n### 使用不同的模型\n\n```bash\npython scripts/optimize_meeting_minutes.py meeting.txt --model \"jcai/llama3-taide-lx-8b-chat-alpha1_Q4_K_M\"\n```\n\n### 調整生成長度\n\n```bash\n# 增加生成長度限制\npython scripts/optimize_meeting_minutes.py meeting.txt --max-length 4096\n```\n\n## 疑難排解\n\n### 記憶體不足\n\n如果遇到記憶體不足錯誤，請嘗試：\n\n1. 減少生成長度 (`--max-length`)\n2. 使用較小的模型\n3. 增加系統交換空間\n4. 使用 CPU 模式（不推薦，速度較慢）\n\n### 模型下載問題\n\n如果模型下載失敗：\n\n1. 檢查網路連接\n2. 確保有足夠的磁碟空間\n3. 手動下載模型並指定本地路徑\n\n## 貢獻指南\n\n歡迎提交問題和拉取請求！請確保：\n\n1. 遵循現有的代碼風格\n2. 為新功能添加測試\n3. 更新相關文檔\n\n## 授權\n\n[在此添加授權信息]",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板，旨在提升其準確性、完整性、清晰度和專業性：\n\n**會議記錄**\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”、“市場策略方案審查會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01 - 建議使用標準化編碼系統)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部; 視訊會議 - Google Meet, Microsoft Teams)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職稱 | 出席狀態 (例如：出席、缺席、遲到、視訊出席) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向；審查市場策略方案，確定目標市場和推廣方案}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策 - 建議使用時間軸格式}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體；審查了市場策略方案，並針對競爭格局提出了建議}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 | 相關文件/連結 (例如：Google Drive 連結) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算 - 需明確預算金額和分配比例)\n*   {決議事項 2}\n*   ... (建議將決議事項與相關文件連結)\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結、附件) | 優先級 (高/中/低) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險 - 建議使用風險評估矩阵}\n\n| 潛在風險 | 影響程度 (高/中/低) | 備案措施 | 負責人 | 預期發生時間 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項 - 建議加入跟進機制}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**重要提示:**\n\n*   **記錄準確性至關重要。** 在會議結束後立即記錄，並盡可能詳細地記錄所有討論內容。\n*   **使用專業術語和標準化詞彙。**  確保所有參與者理解使用的術語。\n*   **積極參與討論，並記錄關鍵資訊。**  不要只是記錄會議的內容，還要記錄參與者的觀點和建議。\n*   **鼓勵與會者在會議記錄中補充或修改信息。**  在發送會議記錄之前，請務必徵求與會者的意見。\n*   **建立會議記錄管理流程。**  確定會議記錄的保存、版本控制和分發方式。\n*   **定期審核和更新會議記錄。**  確保會議記錄的準確性和完整性。\n\n**建議附件:**  (可選)  會議記錄應包含相關文件連結，例如：PPT、數據報告、市場分析報告等。\n\n---\n\n**額外建議:**\n\n*   **使用數位會議記錄工具。**  許多工具可以自動記錄會議內容、生成會議摘要和創建行動項目清單。\n*   **建立會議記錄模板。**  使用標準化的模板可以提高會議記錄的效率和一致性。\n\n希望這個更完善的模板能幫助您更好地記錄會議。\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板，旨在提升其準確性、完整性、清晰度和專業性：\n\n**會議記錄**\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”、“市場策略方案審查會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01 - 建議使用標準化編碼系統)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部; 視訊會議 - Google Meet, Microsoft Teams)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職稱 | 出席狀態 (例如：出席、缺席、遲到、視訊出席) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，例如：評估新產品概念的可行性，確定開發方向；審查市場策略方案，確定目標市場和推廣方案}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，例如：10:00-10:30 產品概念介紹，10:30-11:00 市場分析，11:00-11:30 討論與決策 - 建議使用時間軸格式}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，例如：確認了核心功能需求，初步確定了目標用戶群體；審查了市場策略方案，並針對競爭格局提出了建議}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 | 相關文件/連結 (例如：Google Drive 連結) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，例如：批准開發核心功能，並分配預算 - 需明確預算金額和分配比例)\n*   {決議事項 2}\n*   ... (建議將決議事項與相關文件連結)\n\n**行動項目:**\n\n| 負責人 | 行動項目 | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結、附件) | 優先級 (高/中/低) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，例如：技術風險、市場風險、時間風險 - 建議使用風險評估矩阵}\n\n| 潛在風險 | 影響程度 (高/中/低) | 備案措施 | 負責人 | 預期發生時間 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項 - 建議加入跟進機制}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**重要提示:**\n\n*   **記錄準確性至關重要。** 在會議結束後立即記錄，並盡可能詳細地記錄所有討論內容。\n*   **使用專業術語和標準化詞彙。**  確保所有參與者理解使用的術語。\n*   **積極參與討論，並記錄關鍵資訊。**  不要只是記錄會議的內容，還要記錄參與者的觀點和建議。\n*   **鼓勵與會者在會議記錄中補充或修改信息。**  在發送會議記錄之前，請務必徵求與會者的意見。\n*   **建立會議記錄管理流程。**  確定會議記錄的保存、版本控制和分發方式。\n*   **定期審核和更新會議記錄。**  確保會議記錄的準確性和完整性。\n\n**建議附件:**  (可選)  會議記錄應包含相關文件連結，例如：PPT、數據報告、市場分析報告等。\n\n---\n\n**額外建議:**\n\n*   **使用數位會議記錄工具。**  許多工具可以自動記錄會議內容、生成會議摘要和創建行動項目清單。\n*   **建立會議記錄模板。**  使用標準化的模板可以提高會議記錄的效率和一致性。\n\n希望這個更完善的模板能幫助您更好地記錄會議。\n\n參考:\n# 會議記錄優化工具安裝與使用指南\n\n## 環境要求\n\n- Python 3.8 或更高版本\n- CUDA 11.7 或更高版本（如需 GPU 加速）\n- 至少 16GB 系統記憶體（建議 32GB 或更多）\n- 至少 20GB 可用磁碟空間（用於模型快取）\n\n## 安裝步驟\n\n1. 克隆代碼庫：\n   ```bash\n   git clone <repository-url>\n   cd exam08_提示詞練習重啟\n   ```\n\n2. 創建並啟動虛擬環境（建議）：\n   ```bash\n   python -m venv venv\n   source venv/bin/activate  # Linux/Mac\n   # 或\n   .\\venv\\Scripts\\activate  # Windows\n   ```\n\n3. 安裝依賴：\n   ```bash\n   pip install -r requirements.txt\n   ```\n\n4. 安裝 PyTorch（如需 GPU 支援）：\n   ```bash\n   # 請根據您的 CUDA 版本選擇合適的安裝命令\n   # 例如，CUDA 11.8：\n   pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118\n   ```\n\n## 下載模型\n\n本工具支援多種語言模型，預設使用 `cwchang/llama3-taide-lx-8b-chat-alpha1_latest`。\n\n首次運行時，工具會自動下載模型（約 15GB）。確保您有足夠的磁碟空間和穩定的網路連接。\n\n## 使用方法\n\n### 1. 優化單個會議記錄\n\n```bash\npython scripts/optimize_meeting_minutes.py path/to/your/meeting.txt\n```\n\n### 2. 批量處理多個會議記錄\n\n```bash\n# 創建輸出目錄\nmkdir -p optimized_meetings\n\n# 處理目錄中的所有 .txt 文件\nfor f in data/meetings/*.txt; do\n    python scripts/optimize_meeting_minutes.py \"$f\" -o optimized_meetings\ndone\n```\n\n### 3. 評估優化效果\n\n```bash\n# 評估單個優化結果\npython scripts/test_optimization.py --test-dir path/to/test/files --output-dir results/evaluation\n\n# 查看評估報告\ncat results/evaluation/optimization_evaluation.json\n```\n\n## 進階選項\n\n### 使用不同的模型\n\n```bash\npython scripts/optimize_meeting_minutes.py meeting.txt --model \"jcai/llama3-taide-lx-8b-chat-alpha1_Q4_K_M\"\n```\n\n### 調整生成長度\n\n```bash\n# 增加生成長度限制\npython scripts/optimize_meeting_minutes.py meeting.txt --max-length 4096\n```\n\n## 疑難排解\n\n### 記憶體不足\n\n如果遇到記憶體不足錯誤，請嘗試：\n\n1. 減少生成長度 (`--max-length`)\n2. 使用較小的模型\n3. 增加系統交換空間\n4. 使用 CPU 模式（不推薦，速度較慢）\n\n### 模型下載問題\n\n如果模型下載失敗：\n\n1. 檢查網路連接\n2. 確保有足夠的磁碟空間\n3. 手動下載模型並指定本地路徑\n\n## 貢獻指南\n\n歡迎提交問題和拉取請求！請確保：\n\n1. 遵循現有的代碼風格\n2. 為新功能添加測試\n3. 更新相關文檔\n\n## 授權\n\n[在此添加授權信息]"
        ]
      },
      "timestamp": "2025-05-28T14:26:36.559345"
    },
    {
      "iteration": 6,
      "stability_score": 0.6060367206419099,
      "quality_score": 0.0,
      "overall_score": 0.36362203238514595,
      "metrics": {
        "stability_score": 0.6060367206419099,
        "quality_score": 0.0,
        "overall_score": 0.36362203238514595,
        "stability_metrics": {
          "format_consistency": 0.9611350169585275,
          "length_stability": 0.6369205021098691,
          "key_element_coverage": 0.3333333333333333,
          "semantic_stability": 0.4515605756618894,
          "overall_stability": 0.6060367206419099
        },
        "quality_metrics": {
          "categories": {
            "semantic_similarity": {
              "name": "semantic_similarity",
              "score": 0.0,
              "metrics": {
                "bertscore_f1": {
                  "score": 0.0,
                  "weight": 1.0,
                  "details": {
                    "error": "unhashable type: 'list'"
                  }
                }
              }
            },
            "content_coverage": {
              "name": "content_coverage",
              "score": 0.0,
              "metrics": {
                "rouge1": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rouge2": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                },
                "rougeL": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'lower'"
                  }
                }
              }
            },
            "structure_quality": {
              "name": "structure_quality",
              "score": 0.0,
              "metrics": {
                "section_heading_quality": {
                  "score": 0.0,
                  "weight": 0.4,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "paragraph_structure": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                },
                "list_usage": {
                  "score": 0.0,
                  "weight": 0.3,
                  "details": {
                    "error": "'list' object has no attribute 'split'"
                  }
                }
              }
            }
          },
          "overall_score": 0.0
        },
        "generated_samples": [
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板，旨在提升準確性、完整性、清晰度和專業性：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”、“市場策略方案審查會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01 - 建議使用標準化的編碼系統)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部, 視訊會議 - 需記錄會議連結)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職稱 | 出席狀態 (例如：出席、缺席、遲到、線上參與) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，以及預期產出。例如：評估新產品概念的可行性，確定開發方向，制定初步市場策略方案}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，以及預期討論深度。例如：10:00-10:30 產品概念介紹，10:30-10:45 市場分析初步評估，10:45-11:15 討論與決策，11:15-11:30 總結與下一步行動}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，並強調關鍵決策和下一步行動。例如：確認了核心功能需求，初步確定了目標用戶群體，並同意進行市場調查}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，並明確相關責任人。例如：批准開發核心功能，並分配預算 500,000 美元)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 (具體描述要做什麼) | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結、共享文件) | 優先級 (高/中/低) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，並評估其影響程度和可能性。例如：技術風險 - 系統集成問題，影響程度：高，可能性：中，應對措施：進行早期測試}\n\n| 潛在風險 | 影響程度 (高/中/低) | 可能性 (高/中/低) | 應對措施 | 負責人 | 備註 |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項、需要確認的細節}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**重要說明:**\n\n*   **記錄準確性至關重要。** 盡可能在會議中記錄，並在會後盡快完成記錄。\n*   **使用標準化的術語和定義。**  確保與會者理解相同的術語。\n*   **鼓勵參與。**  鼓勵與會者提供反饋，並在記錄中補充或修改信息。\n*   **定期審核和更新記錄。**  確保記錄的準確性和完整性。\n*   **保存記錄的完整副本。**  確保記錄的安全和可追溯性。\n\n**建議:**  建立一個標準化的會議記錄模板，並定期進行審核和更新。  考慮使用數位工具來提高效率和可追蹤性。\n\n---\n\n希望這個改進後的模板能更好地滿足您的需求！  如果您有任何其他要求，請隨時提出。\n\n\n參考:\ntorch>=2.0.0\ntransformers>=4.30.0\nevaluate>=0.4.0\nrouge-score>=0.1.2\nbert-score>=0.3.13\ntqdm>=4.65.0\npandas>=1.5.0\nnumpy>=1.24.0\nscikit-learn>=1.2.0",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板，旨在提升準確性、完整性、清晰度和專業性：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”、“市場策略方案審查會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01 - 建議使用標準化的編碼系統)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部, 視訊會議 - 需記錄會議連結)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職稱 | 出席狀態 (例如：出席、缺席、遲到、線上參與) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，以及預期產出。例如：評估新產品概念的可行性，確定開發方向，制定初步市場策略方案}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，以及預期討論深度。例如：10:00-10:30 產品概念介紹，10:30-10:45 市場分析初步評估，10:45-11:15 討論與決策，11:15-11:30 總結與下一步行動}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，並強調關鍵決策和下一步行動。例如：確認了核心功能需求，初步確定了目標用戶群體，並同意進行市場調查}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，並明確相關責任人。例如：批准開發核心功能，並分配預算 500,000 美元)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 (具體描述要做什麼) | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結、共享文件) | 優先級 (高/中/低) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，並評估其影響程度和可能性。例如：技術風險 - 系統集成問題，影響程度：高，可能性：中，應對措施：進行早期測試}\n\n| 潛在風險 | 影響程度 (高/中/低) | 可能性 (高/中/低) | 應對措施 | 負責人 | 備註 |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項、需要確認的細節}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**重要說明:**\n\n*   **記錄準確性至關重要。** 盡可能在會議中記錄，並在會後盡快完成記錄。\n*   **使用標準化的術語和定義。**  確保與會者理解相同的術語。\n*   **鼓勵參與。**  鼓勵與會者提供反饋，並在記錄中補充或修改信息。\n*   **定期審核和更新記錄。**  確保記錄的準確性和完整性。\n*   **保存記錄的完整副本。**  確保記錄的安全和可追溯性。\n\n**建議:**  建立一個標準化的會議記錄模板，並定期進行審核和更新。  考慮使用數位工具來提高效率和可追蹤性。\n\n---\n\n希望這個改進後的模板能更好地滿足您的需求！  如果您有任何其他要求，請隨時提出。\n\n\n參考:\n# 會議記錄優化與評估系統\n\n## 專案概述\n\n本專案旨在利用大型語言模型（LLM）來自動優化會議記錄，提高其結構化程度、完整性和可讀性。系統支援多種優化策略，並提供全面的評估框架來衡量優化效果。\n\n## 主要功能\n\n- **多策略優化**：支援多種會議記錄優化策略\n- **多模型支援**：可與多種開源和商業語言模型整合\n- **自動化評估**：提供多種評估指標來衡量優化效果\n- **可擴展架構**：易於添加新的優化策略和評估指標\n\n## 快速開始\n\n### 前置需求\n- Python 3.8+\n- Ollama 服務 (用於運行本地模型)\n\n### 安裝步驟\n\n```bash\n# 1. 克隆存儲庫\ngit clone https://github.com/colabbrave/exam08.git\ncd exam08\n\n# 2. 創建並啟動虛擬環境\npython -m venv venv\nsource venv/bin/activate  # Linux/Mac\n# 或\n# .\\venv\\Scripts\\activate  # Windows\n\n# 3. 安裝依賴\npip install -r requirements.txt\n\n# 4. 下載並啟動 Ollama 模型\nollama pull gemma3:4b  # 或其他支援的模型\n```\n\n### 基本用法\n\n```bash\n# 優化會議記錄\n./run_optimization.sh\n\n# 或指定模型\n./run_optimization.sh --model gemma3:4b\n\n# 評估優化結果\npython scripts/evaluate.py --model gemma3_4b\n```\n\n## 專案結構\n\n```\n.\n├── config/                  # 配置文件\n├── data/                    # 數據目錄\n│   ├── reference/           # 參考會議記錄\n│   └── transcript/          # 原始逐字稿\n├── docu/                    # 文檔\n├── logs/                    # 運行日誌\n├── models/                  # 模型文件\n├── prompts/                 # 提示詞模板\n│   ├── base/                # 基礎提示詞\n│   ├── components/          # 提示詞組件\n│   ├── optimized/           # 優化後的提示詞\n│   └── preloaded/           # 預加載的提示詞\n├── results/                 # 結果輸出\n│   ├── evaluation_reports/  # 評估報告\n│   └── optimized/           # 優化後的會議記錄\n└── scripts/                 # 腳本文件\n    ├── evaluate.py          # 評估腳本\n    ├── optimize.py          # 優化腳本\n    ├── model_manager.py     # 模型管理\n    ├── ollama_manager.py    # Ollama 集成\n    └── select_model.py      # 模型選擇\n```\n\n## 評估結果\n\n### 多指標評估系統\n\n我們實現了全面的多指標評估系統，包含以下主要指標：\n\n#### 1. 語義相似度 (權重 50%)\n- **BERTScore F1**：衡量優化前後文本的語義相似度\n- **平均分數**：0.85\n\n#### 2. 內容覆蓋度 (權重 30%)\n- **ROUGE-1**：unigram 層面的覆蓋度\n- **ROUGE-2**：bigram 層面的覆蓋度\n- **ROUGE-L**：最長公共子序列\n- **平均分數**：0.78\n\n#### 3. 結構化程度 (權重 20%)\n- 章節標題質量\n- 段落結構質量\n- 列表使用適當性\n- **平均分數**：0.82\n\n### 模型表現比較\n\n| 模型 | 綜合得分 | 響應時間 | BERTScore | ROUGE-L |\n|------|---------|---------|-----------|---------|\n| gemma3:4b | 0.85 | 45.2s | 0.88 | 0.75 |\n| llama3-8b | 0.82 | 68.7s | 0.86 | 0.73 |\n| mistral-7b | 0.80 | 52.1s | 0.84 | 0.72 |\n\n### 最佳實踐策略排名\n\n1. **補充省略資訊** (0.92)\n   - 提升內容完整性\n   - 自動補全會議中的隱含資訊\n\n2. **明確標註發言者** (0.89)\n   - 提高可讀性\n   - 便於追蹤討論脈絡\n\n3. **結構化摘要** (0.88)\n   - 提升文件結構化程度\n   - 便於快速瀏覽重點\n\n4. **專業術語標準化** (0.86)\n   - 統一專業術語使用\n   - 提高專業性\n\n5. **標準格式模板** (0.85)\n   - 確保格式一致性\n   - 符合企業規範\n\n> **注意**：詳細評估報告請參考 [評估報告目錄](results/evaluation_reports/)\n\n## 貢獻指南\n\n我們歡迎任何形式的貢獻！以下是參與項目的步驟：\n\n1. Fork 本項目\n2. 創建特性分支 (`git checkout -b feature/amazing-feature`)\n3. 提交更改 (`git commit -m 'Add some amazing feature'`)\n4. 推送到分支 (`git push origin feature/amazing-feature`)\n5. 開啟 Pull Request\n\n### 代碼風格\n- 使用 [Black](https://github.com/psf/black) 進行代碼格式化\n- 使用 [Google 風格的 Python 文檔字符串](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings)\n\n### 提交信息規範\n請遵循 [Conventional Commits](https://www.conventionalcommits.org/) 規範：\n- feat: 新功能\n- fix: 修復 bug\n- docs: 文檔更新\n- style: 代碼格式\n- refactor: 代碼重構\n- test: 測試相關\n- chore: 構建過程或輔助工具的變動\n\n## 專案進度\n\n### 完成情況\n\n1. **基本架構建立** ✅ 已完成\n   - 專案目錄結構\n   - 基礎優化流程\n   - 多模型支援\n\n2. **評估系統實現** ✅ 已完成\n   - ✅ 基本評估框架\n   - ✅ BERTScore 實現\n   - ✅ ROUGE 實現\n   - ✅ 多指標整合\n   - ✅ 評估報告生成\n   - ✅ 評估報告優化 (改為結構化數據格式)\n\n### 當前階段\n\n3. **提示工程優化** 🚀 進行中\n   - 大模型輔助提示詞優化\n   - 非監督學習優化循環\n   - 自動化評估與反饋\n\n### 後續計劃\n\n4. **效能優化** ⏳ 未開始\n   - 並行處理優化\n   - 快取機制實現\n   - 資源使用監控\n\n5. **系統整合** ⏳ 未開始\n   - API 服務封裝\n   - 自動化部署流程\n   - 監控告警系統\n\n## 系統需求與優化\n\n### 硬體配置\n\n- **裝置**：MacBook Pro (M4 晶片)\n- **CPU**：10 核心 (4 個效能核心 + 6 個節能核心)\n- **記憶體**：16GB 統一記憶體\n- **GPU**：Apple M4 整合式顯示晶片\n\n### 模型配置\n\n- **基礎模型**：`cwchang/llama3-taide-lx-8b-chat-alpha1:latest`\n  - 使用 4-bit 量化載入\n  - 主要用於會議記錄生成\n\n- **優化模型**：`google/gemma-3-12b`\n  - 使用 4-bit 量化載入\n  - 用於提示詞優化和改進\n\n## 提示工程優化架構\n\n### 核心組件\n\n1. **會議上下文感知模組**\n   - 自動識別會議類型和特徵\n   - 分析參與者角色和互動模式\n   - 提取關鍵決策點和行動項目\n\n2. **分層提示詞引擎**\n   - 感知層：理解會議本質特徵\n   - 策略層：選擇最優記錄策略\n   - 執行層：生成結構化會議記錄\n\n3. **動態策略管理器**\n   - 多種會議類型的專用策略\n   - 上下文感知的模板選擇\n   - 實時策略調整機制\n\n### 技術實現\n\n```python\n# 會議上下文分析示例\nclass MeetingAnalyzer:\n    def analyze(self, meeting_data: dict) -> MeetingContext:\n        context = MeetingContext()\n        context.meeting_type = self._classify_meeting_type(meeting_data)\n        context.participants = self._extract_participants(meeting_data)\n        context.decision_density = self._calculate_decision_density(meeting_data)\n        return context\n```\n\n### 實施路線圖\n\n#### 階段一：基礎架構重構 (2週)\n- [ ] 實現會議上下文感知模組\n- [ ] 開發分層提示詞引擎基礎框架\n- [ ] 創建3種基礎會議類型的適配器\n\n#### 階段二：動態策略實現 (3週)\n- [ ] 實現策略管理器\n- [ ] 開發模板組件系統\n- [ ] 整合上下文感知評估\n\n#### 階段三：自適應優化 (3週)\n- [ ] 實現強化學習優化器\n- [ ] 設置在線學習循環\n- [ ] 集成知識圖譜\n\n### 預期效益\n\n- **更智能的會議理解**：超越表面指標，理解會議本質\n- **動態適配能力**：根據會議類型自動調整記錄策略\n- **持續優化**：通過在線學習不斷改進表現\n- **更好的可解釋性**：清晰的決策過程和優化路徑\n\n### 技術棧\n\n- **核心框架**：Python 3.9+\n- **機器學習**：PyTorch, Transformers, bitsandbytes (4-bit 量化)\n- **NLP工具**：sentence-transformers, NLTK\n- **記憶體優化**：accelerate, vLLM (可選)\n- **監控工具**：psutil, GPUtil\n\n### 記憶體優化策略\n\n1. **模型量化**\n   - 使用 4-bit 量化技術\n   - 動態量化權重矩陣\n   - 啟用 Flash Attention 2 (如支援)\n\n2. **批次處理**\n   - 小批次處理輸入數據\n   - 實現記憶體監控\n   - 動態調整批次大小\n\n3. **快取機制**\n   - 使用 LRU 快取優化結果\n   - 實現提示詞模板快取\n   - 特徵向量快取\n\n4. **資源監控**\n   - 即時監控記憶體使用\n   - 動態降級機制\n   - 自動清理未使用的資源\n\n### 開發原則\n\n1. **資源效率**：優先考慮記憶體和計算效率\n2. **漸進式增強**：先實現核心功能，再逐步優化\n3. **可觀察性**：完善的監控和日誌記錄\n4. **優雅降級**：在資源受限時自動調整功能\n\n### 效能基準\n\n| 任務 | 預期記憶體使用 | 預期處理時間 |\n|------|--------------|------------|\n| 模型載入 | ~8GB | 30-60秒 |\n| 提示詞優化 | ~12GB | 5-15秒/提示 |\n| 批次處理 (n=5) | ~14GB | 20-40秒 |\n\n> **注意**：實際數值可能因系統負載和具體輸入而異\n\n### 已知限制\n\n1. **記憶體限制**：\n   - 同時載入多個大型模型可能導致記憶體不足\n   - 建議一次只載入一個模型進行推理\n\n2. **處理時間**：\n   - 複雜提示詞可能需要更長處理時間\n   - 批次處理時延遲會增加\n\n3. **建議的最佳實踐**：\n   - 實現請求佇列系統\n   - 設定處理超時機制\n   - 定期重啟長時間運行的程序以釋放記憶體\n\n## 最近更新\n\n### 2025-05-28 (最新)\n- 重構提示工程優化架構\n- 實現分層提示詞引擎\n- 新增會議上下文感知模組\n- 設計動態策略管理系統\n- 更新實施路線圖\n\n### 2025-05-27\n- 更新 README 文件，改進文檔結構和內容完整性\n- 修復評估階段文件路徑比對問題\n- 優化模型名稱處理邏輯，支援不同格式的模型名稱\n- 改進評估腳本，可選擇性評估特定模型的結果\n- 更新 `run_optimization.sh` 腳本，確保正確傳遞模型參數\n- 改進錯誤處理和日誌記錄\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-27\n- 新增模型執行時間統計功能\n- 新增策略執行時間統計功能\n- 改進模型名稱處理邏輯\n- 優化錯誤處理和重試機制\n- 添加 `run_all_models.sh` 腳本用於批量運行多個模型\n\n### 2025-05-26\n- 實現模型響應時間追蹤\n- 優化模型調用過程中的錯誤處理\n- 改進重試機制，提高穩定性\n\n### 2025-05-25\n- 修復 `time` 模組導入問題\n- 修正 `model_timings` 和 `strategy_timings` 變數作用域問題\n- 更新評估結果和改進策略\n\n## 授權\n\n本項目採用 [MIT 許可證](LICENSE) 授權。",
          "生成的會議記錄（基於模板和參考文本）:\n好的，以下是根據您的要求改進後的會議記錄模板，旨在提升準確性、完整性、清晰度和專業性：\n\n**[會議記錄]**\n\n**會議標題:** {會議標題} (請使用具體、描述性的標題，例如“產品開發階段初評估會議”、“市場策略方案審查會議”)\n\n**會議編號 (可選):** {會議編號} (用於追蹤和管理，例如：PD-20231027-01 - 建議使用標準化的編碼系統)\n\n**日期:** {YYYY-MM-DD} (例如：2023-10-27)\n\n**時間:** {開始時間} - {結束時間} (例如：10:00 AM - 11:30 AM)\n\n**地點:** {會議地點} (例如：會議室 A, 總部, 視訊會議 - 需記錄會議連結)\n\n**與會人員:**\n\n| 姓名 | 職位 | 職稱 | 出席狀態 (例如：出席、缺席、遲到、線上參與) |\n|---|---|---|---|\n|  |  |  |  |\n|  |  |  |  |\n|  |  |  |  |\n\n**會議目的:** {會議目的 - 簡要描述會議旨在達成什麼目標，以及預期產出。例如：評估新產品概念的可行性，確定開發方向，制定初步市場策略方案}\n\n**會議議程 (可選):** {會議議程 - 包含時間分配和討論主題，以及預期討論深度。例如：10:00-10:30 產品概念介紹，10:30-10:45 市場分析初步評估，10:45-11:15 討論與決策，11:15-11:30 總結與下一步行動}\n\n**會議摘要:** {會議摘要 - 簡要概述會議的主要內容和重點，並強調關鍵決策和下一步行動。例如：確認了核心功能需求，初步確定了目標用戶群體，並同意進行市場調查}\n\n**討論要點:**\n\n| 時間 | 主題/討論點 | 參與者 | 關鍵數據/爭論焦點 | 決定/結論 |\n|---|---|---|---|---|\n|  |  |  |  |  |\n|  |  |  |  |  |\n|  |  |  |  |  |\n\n**決議事項:**\n\n*   {決議事項 1} (明確、具體的決策，並明確相關責任人。例如：批准開發核心功能，並分配預算 500,000 美元)\n*   {決議事項 2}\n*   ...\n\n**行動項目:**\n\n| 負責人 | 行動項目 (具體描述要做什麼) | 截止日期 | 狀態 (未開始、進行中、已完成) | 相關文件/連結 (例如：Google Drive 連結、共享文件) | 優先級 (高/中/低) |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**風險評估 (可選):** {風險評估 - 識別會議中可能出現的風險和應對措施，並評估其影響程度和可能性。例如：技術風險 - 系統集成問題，影響程度：高，可能性：中，應對措施：進行早期測試}\n\n| 潛在風險 | 影響程度 (高/中/低) | 可能性 (高/中/低) | 應對措施 | 負責人 | 備註 |\n|---|---|---|---|---|---|\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n|  |  |  |  |  |  |\n\n**備註:** {其他需要記錄的資訊，例如：會後跟進事項、特殊情況、與其他部門的協調事項、需要確認的細節}\n\n**記錄人:** {記錄人姓名}\n\n**簽署:** {記錄人簽名}\n\n---\n\n**重要說明:**\n\n*   **記錄準確性至關重要。** 盡可能在會議中記錄，並在會後盡快完成記錄。\n*   **使用標準化的術語和定義。**  確保與會者理解相同的術語。\n*   **鼓勵參與。**  鼓勵與會者提供反饋，並在記錄中補充或修改信息。\n*   **定期審核和更新記錄。**  確保記錄的準確性和完整性。\n*   **保存記錄的完整副本。**  確保記錄的安全和可追溯性。\n\n**建議:**  建立一個標準化的會議記錄模板，並定期進行審核和更新。  考慮使用數位工具來提高效率和可追蹤性。\n\n---\n\n希望這個改進後的模板能更好地滿足您的需求！  如果您有任何其他要求，請隨時提出。\n\n\n參考:\n# 會議記錄優化工具安裝與使用指南\n\n## 環境要求\n\n- Python 3.8 或更高版本\n- CUDA 11.7 或更高版本（如需 GPU 加速）\n- 至少 16GB 系統記憶體（建議 32GB 或更多）\n- 至少 20GB 可用磁碟空間（用於模型快取）\n\n## 安裝步驟\n\n1. 克隆代碼庫：\n   ```bash\n   git clone <repository-url>\n   cd exam08_提示詞練習重啟\n   ```\n\n2. 創建並啟動虛擬環境（建議）：\n   ```bash\n   python -m venv venv\n   source venv/bin/activate  # Linux/Mac\n   # 或\n   .\\venv\\Scripts\\activate  # Windows\n   ```\n\n3. 安裝依賴：\n   ```bash\n   pip install -r requirements.txt\n   ```\n\n4. 安裝 PyTorch（如需 GPU 支援）：\n   ```bash\n   # 請根據您的 CUDA 版本選擇合適的安裝命令\n   # 例如，CUDA 11.8：\n   pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118\n   ```\n\n## 下載模型\n\n本工具支援多種語言模型，預設使用 `cwchang/llama3-taide-lx-8b-chat-alpha1_latest`。\n\n首次運行時，工具會自動下載模型（約 15GB）。確保您有足夠的磁碟空間和穩定的網路連接。\n\n## 使用方法\n\n### 1. 優化單個會議記錄\n\n```bash\npython scripts/optimize_meeting_minutes.py path/to/your/meeting.txt\n```\n\n### 2. 批量處理多個會議記錄\n\n```bash\n# 創建輸出目錄\nmkdir -p optimized_meetings\n\n# 處理目錄中的所有 .txt 文件\nfor f in data/meetings/*.txt; do\n    python scripts/optimize_meeting_minutes.py \"$f\" -o optimized_meetings\ndone\n```\n\n### 3. 評估優化效果\n\n```bash\n# 評估單個優化結果\npython scripts/test_optimization.py --test-dir path/to/test/files --output-dir results/evaluation\n\n# 查看評估報告\ncat results/evaluation/optimization_evaluation.json\n```\n\n## 進階選項\n\n### 使用不同的模型\n\n```bash\npython scripts/optimize_meeting_minutes.py meeting.txt --model \"jcai/llama3-taide-lx-8b-chat-alpha1_Q4_K_M\"\n```\n\n### 調整生成長度\n\n```bash\n# 增加生成長度限制\npython scripts/optimize_meeting_minutes.py meeting.txt --max-length 4096\n```\n\n## 疑難排解\n\n### 記憶體不足\n\n如果遇到記憶體不足錯誤，請嘗試：\n\n1. 減少生成長度 (`--max-length`)\n2. 使用較小的模型\n3. 增加系統交換空間\n4. 使用 CPU 模式（不推薦，速度較慢）\n\n### 模型下載問題\n\n如果模型下載失敗：\n\n1. 檢查網路連接\n2. 確保有足夠的磁碟空間\n3. 手動下載模型並指定本地路徑\n\n## 貢獻指南\n\n歡迎提交問題和拉取請求！請確保：\n\n1. 遵循現有的代碼風格\n2. 為新功能添加測試\n3. 更新相關文檔\n\n## 授權\n\n[在此添加授權信息]"
        ]
      },
      "timestamp": "2025-05-28T14:27:19.119924"
    }
  ]
}